<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Flavia de Jesus">
<meta name="description" content="Ao trabalhar com análise de dados no R, a importação dos dados é o primeiro passo essencial. Este post aborda como importar arquivos de diferentes formatos e fontes, incluindo texto, Excel, SPSS e dados da internet.">

<title>Importando dados no R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<link href="../..//img/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(banner.png);
background-size: cover;
      }
</style>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/daslab-logo-removebg.png" alt="" class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Alternar de navegação" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../sobre/index.html"> 
<span class="menu-text">Sobre</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projetos/index.html"> 
<span class="menu-text">Projetos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutoriais/index.html"> 
<span class="menu-text">Tutoriais</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../ensinar/index.html"> 
<span class="menu-text">ensinaR</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../oobr/index.html"> 
<span class="menu-text">OOBr</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../eventos/index.html"> 
<span class="menu-text">Eventos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contato/index.html"> 
<span class="menu-text">Contato</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Importando dados no R</h1>
                  <div>
        <div class="description">
          Ao trabalhar com análise de dados no R, a importação dos dados é o primeiro passo essencial. Este post aborda como importar arquivos de diferentes formatos e fontes, incluindo texto, Excel, SPSS e dados da internet.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">Data Wrangling</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Autor</div>
      <div class="quarto-title-meta-contents">
               <p>Flavia de Jesus </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Data de Publicação</div>
      <div class="quarto-title-meta-contents">
        <p class="date">5 de março de 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<style>
body {
    background: white;
}

.quarto-title-banner{
    text-align: left !important;
}
</style>
<p>Quando estamos trabalhando com algum tipo de análise de dados no R, a primeira coisa que fazemos é importar e ler os dados que vamos utilizar, para isso existem vários pacotes que nos permitem importar arquivos de diversos formatos de extensão. Neste post veremos como importar arquivos de texto, planilhas do excel, extensões de outros programas estatísticos como SPSS e também como importar dados da internet.</p>
<section id="projetos" class="level2">
<h2 class="anchored" data-anchor-id="projetos">Projetos</h2>
<p>Para facilitar a reprodução dos exemplos aqui, sugerimos que as pessoas interessadas copiem os arquivos disponíveis no <a href="../..\assets/dados/cadastro_cliente.sas7bdat">link1</a>, <a href="../..\assets/dados/dados1.csv">link2</a> e <a href="../..\assets/dados/dados2.xlsx">link3</a>. Sugerimos também a criação de um projeto no RStudio para deixar a importação e a leitura dos dados de forma mais direta. Um projeto nada mais é do que uma pasta no computador. Nesta pasta, estarão todos os arquivos que usaremos para importar para o Rstudio.</p>
<p>Segue o passo a passo para criar um projeto:</p>
<ol type="1">
<li><p>Clique na opção “File” do menu, e então em “New Project”;</p></li>
<li><p>Clique em “New Directory”;</p></li>
<li><p>Clique em “New Project”;</p></li>
<li><p>Escreva o nome do diretório (pasta) onde deseja manter seu projeto;</p></li>
<li><p>Clique no botão “Create Project”.</p></li>
</ol>
<p>O RStudio irá abrir uma nova janela feita exclusivamente para o projeto criado. Para criar um novo script onde escreveremos nossos código é só ir em <strong>File &gt; New File &gt; R Script</strong>.</p>
<p>Uma outra forma de criar projetos no R é clicando na aba no canto superior direito, onde se abrirá um menu com opções para criar projetos e também aparecerão todos os projetos existentes no RStudio, possibilitando uma fácil navegação entre os seus projetos.</p>
<p><img src="novo_projeto.png" width="50%" style="display: block; margin: auto;"></p>
<p>Nas opções do menu, selecione a opção “New Project”.</p>
<p><img src="novo_p.png" width="20%" style="display: block; margin: auto;"></p>
</section>
<section id="pacotes-para-importação-de-dados" class="level2">
<h2 class="anchored" data-anchor-id="pacotes-para-importação-de-dados">Pacotes para importação de dados</h2>
<section id="utils" class="level3">
<h3 class="anchored" data-anchor-id="utils"><code>utils</code></h3>
<p>Um dos caminhos mais flexiveis de importação de dados é a função <code>read.table()</code>. Esta é uma função que já vem instalada com o R, faz parte do pacote base <code>utils</code> do R, e importa arquivos nos formatos csv e txt. É um dos principais meios de leitura de dados tabulares em R. Para utilizar é bem simples:</p>
<p>Para utilizar funções do pacote <code>utils</code> não precisamos carregá-lo na memória usando <code>library()</code>. Podemos importar os dados de foma direta.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>dados1 <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">file =</span> <span class="st">"dados1.csv"</span>, <span class="at">sep =</span> <span class="st">";"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Dentro da função <code>read.table()</code> é utilizado o argumento <code>file</code> para colocar o nome do arquivo que será importado e o segundo argumento é o <code>sep</code> que indica qual o símbolo separador de colunas, que neste caso é o ponto e vírgula.</p>
<p>Repare que se não tendo criado um projeto e colocado o arquivo <code>dados1.cvs</code> dentro da pasta, seria necessário escrever o caminho completo onde o arquivo está no computador.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dados1)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 9%">
<col style="width: 30%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>V1</th>
<th>V2</th>
<th>V3</th>
<th>V4</th>
<th>V5</th>
<th>V6</th>
<th>V7</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Febre</td>
<td>DificuldadeRespiratoria</td>
<td>Tosse</td>
<td>Coriza</td>
<td>DorGarganta</td>
<td>Diarreia</td>
<td>Cefaleia</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sim</td>
<td>Nao</td>
<td>Sim</td>
<td>Sim</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Sim</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Sim</td>
</tr>
<tr class="even">
<td>4</td>
<td>Nao</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
</tr>
<tr class="even">
<td>6</td>
<td>Nao</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Sim</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Exportando dados</strong></p>
<p>Neste pacote temos <code>write.table()</code> que é a principal função para exportar seus dados do R. Ela funciona para exportar arquivos em formato de texto simples .csv e .txt e usa basicamente os mesmos argumentos da função read.table().</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(mtcars, <span class="st">"exemplo1.csv"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="readr" class="level3">
<h3 class="anchored" data-anchor-id="readr"><code>readr</code></h3>
<p>Este pacote também é utilizado para importar arquivos do tipo csv e txt. Ele é bastante semelhante com o pacote <code>utils</code> do R base, porém há algumas diferenças notáveis entre eles como: as funções de <code>readr</code> são mais rápidas que suas equivalentes do R base; produzem <code>tibble</code>s e não convertem vetores de caracteres em fatores. Muitas funções do <code>readr</code> são focadas em transformar arquivos simples em <code>data.frame</code>s. Algumas das funções para importar arquivos são:</p>
<ul>
<li><code>read_csv()</code>: para arquivos delimitados por vírgulas.</li>
<li><code>read_csv2()</code>: para arquivos separados por ponto e vírgula.</li>
<li><code>read_tsv()</code>: para arquivos delimitados por tabulações.</li>
<li><code>read_delim()</code>: para arquivos com qualquer delimitador.</li>
<li><code>read_fwf()</code>: para arquivos compactos que devem ter a largura de cada coluna especificada. Para especificar pode se utilizar <code>fwf_widths()</code> ou <code>fwf_positions()</code>.</li>
<li><code>read_table()</code>: para arquivos de texto tabular com colunas separadas por espaço.</li>
</ul>
<p>Lembre-se que se o pacote não estiver disponível no seu computador, você pode instalar com a função <code>install.packages("readr")</code> e antes de usar qualquer pacote que não faça parte do R base, você deve carregá-lo com <code>library(readr)</code>.</p>
<p>Deste pacote podemos utilizar a função <code>read_cvs2()</code>, que importa arquivos em formato csv.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dados2 <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="at">file =</span> <span class="st">"dados1.csv"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>O conteúdo do arquivo é convertido para um objeto do tipo <code>data.frame</code> no R. Para visualizar as primeiras linhas e colunas dos nossos dados é possível utilizar a função <code>head()</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dados2)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="a-tibble-6-x-7" class="level4">
<h4 class="anchored" data-anchor-id="a-tibble-6-x-7">A tibble: 6 x 7</h4>
<div class="table-responsive">
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 28%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Febre</th>
<th>DificuldadeRespiratoria</th>
<th>Tosse</th>
<th>Coriza</th>
<th>DorGarganta</th>
<th>Diarreia</th>
<th>Cefaleia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
</tr>
<tr class="even">
<td>1</td>
<td>Sim</td>
<td>Nao</td>
<td>Sim</td>
<td>Sim</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Sim</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Sim</td>
</tr>
<tr class="even">
<td>3</td>
<td>Nao</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
</tr>
<tr class="even">
<td>5</td>
<td>Nao</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Sim</td>
</tr>
<tr class="odd">
<td>6</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Exportando dados</strong></p>
<p><code>write_delim()</code> é a principal função do pacote <code>readr</code> para exportar um data.frame em formato de texto simples .csv, .txt e usa basicamente os mesmos argumentos da função <code>read_delim()</code>.</p>
<p>Para utilizar os dados dos <code>data.frame</code>’s <code>diamonds</code> e <code>mpg</code> é necessário ter o pacote <code>ggplot2</code> instalado no R.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_delim</span>(diamonds, <span class="st">"exemplo2.txt"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Outra função para exportação de dados é a <code>write_csv()</code>, ela importa arquivos em formato .csv.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(mpg, <span class="st">"exemplo3.csv"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="readxl" class="level3">
<h3 class="anchored" data-anchor-id="readxl">readxl</h3>
<p>O R não possui uma função nativa para importar dados do Excel, portanto deve-se instalar e utilizar certos pacotes para realizar esta operação. Existem diversas opções e os principais pacotes são <code>readxl</code>, <code>xlsx</code>, <code>XLConnect</code> e <code>tidyxl</code>. Apesar destes pacotes terem objetivos semelhantes, cada um tem suas peculiaridades, então aconselha-se estudar cada um desses pacotes e assim decidir qual melhor atende às suas necessidades. Porém, neste post vamos utilizar apenas o pacote <code>readxl</code> que é um dos mais facéis e diretos de se utilizar. Este pacote serve para importar e ler planilhas do Excel nos formatos xlsx ou xls. A seguir estão listadas algumas funções para importação e leitura de dados:</p>
<ul>
<li><code>read_excel()</code>: esta função detecta automaticamente a extensão do arquivo, e importa arquivos do tipo xsl e xlsx.</li>
<li><code>read_xsl()</code>: importa arquivos no formato xsl.</li>
<li><code>read_xlsx()</code>: importa arquivos no formato xlsx.</li>
</ul>
<p>Com relação à instalação e utilização do pacote, o mesmo procedimento considerado para o pacote <code>readr</code> deve ser feito aqui, tendo em vista as funções <code>install.packages()</code> <code>library()</code>.</p>
<p>Para ilustração, deste pacote vamos utilizar a função <code>read_xlsx()</code> para arquivos com formato xlsx. Iremos utilizar os mesmos dados utilizados anteriormente porém com nome e formato diferente.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dados3 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"dados2.xlsx"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Podemos comparar os resultado utilizando a função <code>head()</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dados3)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="a-tibble-6-x-7-1" class="level4">
<h4 class="anchored" data-anchor-id="a-tibble-6-x-7-1">A tibble: 6 x 7</h4>
<div class="table-responsive">
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 28%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Febre</th>
<th>DificuldadeRespiratoria</th>
<th>Tosse</th>
<th>Coriza</th>
<th>DorGarganta</th>
<th>Diarreia</th>
<th>Cefaleia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
</tr>
<tr class="even">
<td>1</td>
<td>Sim</td>
<td>Não</td>
<td>Sim</td>
<td>Sim</td>
<td>Sim</td>
<td>Não</td>
<td>Não</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Sim</td>
<td>Sim</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Sim</td>
</tr>
<tr class="even">
<td>3</td>
<td>Não</td>
<td>Sim</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
</tr>
<tr class="even">
<td>5</td>
<td>Não</td>
<td>Sim</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Sim</td>
</tr>
<tr class="odd">
<td>6</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
<td>Não</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Exportando dados</strong></p>
<p>Para importar dados para o Excel vamos utilizar o pacote <code>writexl</code>, ele possui a função <code>write_xlsx()</code> que exporta arquivos em formato xlsx.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(mpg, <span class="st">"exemplo4.xlsx"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="data.table" class="level3">
<h3 class="anchored" data-anchor-id="data.table"><code>data.table</code></h3>
<p>Este pacote fornece uma versão melhorada de <code>data.frame</code>s, bem como um conjunto de ferramentas para dividir, aplicar e combinar dados. Além disso o pacote disponibiliza uma função muito eficaz para importação de dados em diversos formatos. Tudo isso com baixo tempo de processamento e uso eficiente da memória. Algumas de suas funções são:</p>
<ul>
<li><code>fread()</code>: esta função é similiar ao <code>read.table()</code>, porém é mais rápida e mais coveniente. Argumentos como <code>sep</code>, <code>colClasses</code> e <code>nrows</code>, são detectados de forma automática. Esta função deve ser utilizada para leitura de arquivos delimitados.</li>
<li><code>data.table()</code>: esta função serve para importar dados em formato csv.</li>
</ul>
<p>Novamente, devemos nos atentar se o pacote está disponível e carregá-lo adequadamente com as funções <code>install.packages()</code> e <code>library()</code>.</p>
<p>Deste pacote vamos utilizar a função <code>fread()</code> para importar o arquivo em formato csv.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>dados4 <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"dados1.csv"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Para checar se os dados foram importados corretamente, podemos fazer</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dados4)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 28%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Febre</th>
<th>DificuldadeRespiratoria</th>
<th>Tosse</th>
<th>Coriza</th>
<th>DorGarganta</th>
<th>Diarreia</th>
<th>Cefaleia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sim</td>
<td>Nao</td>
<td>Sim</td>
<td>Sim</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sim</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Sim</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Nao</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
</tr>
<tr class="even">
<td>4</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Nao</td>
<td>Sim</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Sim</td>
</tr>
<tr class="even">
<td>6</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
<td>Nao</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Exportando dados</strong></p>
<p><code>fwrite()</code> é principal função do pacote data.table para exportar um data.frames em formato de texto simples .csv, .txt e usa basicamente os mesmos argumentos da função <code>read_delim()</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fwrite</span>(mtcars, <span class="st">"exemplo5.txt"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="haven" class="level3">
<h3 class="anchored" data-anchor-id="haven"><code>haven</code></h3>
<p>O R também é bastante flexível quanto à importação de dados de outros softwares estatísticos. Este pacote serve para ler arquivos gerados por outros softwares, como SPSS, SAS e STATA. Algumas funções que podemos utilizar são: <code>read_sas()</code> para dados em sas, <code>read_spss()</code> para dados em SPSS e <code>read_dta()</code> e <code>read_stata()</code> para dados gerados em .dta e pelo Stata, respectivamente.</p>
<p>Devemos sempre verificar se o pacote está instalado e carregá-lo antes de qualquer uso. Lembrando que a instalação é feita com a função <code>install.packages()</code> e o pacote é carregado com a função <code>library()</code>.</p>
<p>Para apresentar o pacote, vamos utilizar a função <code>read_sas()</code> para leitura de dados em SAS. Note que a extensão desses arquivos é dada por .sas7bdat.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dados5 <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(<span class="st">"cadastro_cliente.sas7bdat"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Para nos certificar que o arquivo foi carregado de forma correta, podemos fazer</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dados5)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="a-tibble-6-x-8" class="level4">
<h4 class="anchored" data-anchor-id="a-tibble-6-x-8">A tibble: 6 x 8</h4>
<div class="table-responsive">
<table class="table">
<colgroup>
<col style="width: 1%">
<col style="width: 11%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 6%">
<col style="width: 12%">
<col style="width: 16%">
<col style="width: 15%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>CPF</th>
<th>Nome</th>
<th>Nascimento</th>
<th>Sexo</th>
<th>Est_civil</th>
<th>Email</th>
<th>Telefone</th>
<th>CEP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><dbl></dbl></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
</tr>
<tr class="even">
<td>1</td>
<td>520.017.…</td>
<td>Reginald …</td>
<td>1991-03-06</td>
<td>M</td>
<td>Solteiro</td>
<td>rpeters0@dr…</td>
<td>(78) 7886…</td>
<td>64117…</td>
</tr>
<tr class="odd">
<td>2</td>
<td>437.566.…</td>
<td>Ana Silby</td>
<td>1996-10-02</td>
<td>M</td>
<td>Solteiro</td>
<td>asilby1@web…</td>
<td>(46) 6925…</td>
<td>95573…</td>
</tr>
<tr class="even">
<td>3</td>
<td>629.681.…</td>
<td>Adda MacK…</td>
<td>1991-01-09</td>
<td>M</td>
<td>Solteiro</td>
<td>amackenzie2…</td>
<td>(77) 9040…</td>
<td>05071…</td>
</tr>
<tr class="odd">
<td>4</td>
<td>881.223.…</td>
<td>Stacia De…</td>
<td>1997-12-25</td>
<td>F</td>
<td>Casado</td>
<td>sdeerr3@loc…</td>
<td>(27) 9562…</td>
<td>08501…</td>
</tr>
<tr class="even">
<td>5</td>
<td>161.145.…</td>
<td>Samuele S…</td>
<td>1981-06-15</td>
<td>F</td>
<td>Solteiro</td>
<td>sseager4@gi…</td>
<td>(88) 0908…</td>
<td>04302…</td>
</tr>
<tr class="odd">
<td>6</td>
<td>439.045.…</td>
<td>Wilow Sim…</td>
<td>1990-12-05</td>
<td>F</td>
<td>Casado</td>
<td>wsimonitto5…</td>
<td>(11) 6925…</td>
<td>78118…</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Exportando dados</strong></p>
<p>Este pacote possui três funções para exportar dados para o SAS, SPSS e Stata.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_sas</span>(mtcars, <span class="st">"exemplo7.sas7bdat"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_sav</span>(mpg, <span class="st">"exemplo8.sav"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_dta</span>(diamonds, <span class="st">"exemplo9.dta"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="importando-dados-da-internet" class="level3">
<h3 class="anchored" data-anchor-id="importando-dados-da-internet">Importando dados da internet</h3>
<p>Uma das grandes vantagens de se utilizar o R é a quantidade de dados que podem ser importados através da internet. Isso é especialmente prático pois uma base de dados pode ser atualizada através de um simples comando, evitando o tedioso trabalho de coleta manual. Há alternativas para quem precisa utilizar algum arquivo da internet porém não quer fazer o download toda vez que os dados forem atualizados ou simplesmente pelo fato de não querer ficar armazenando dados no seu computador. No R pode-se executar a leitura do arquivo diretamente da internet, em que o programa simplesmente vai acessar e importar os dados através da URL, conforme exemplo abaixo:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>indicadores <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">"http://www.campinas.sp.gov.br/arquivos/financas/ra_indicadores_2015.csv"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Neste exemplo foi utilizada a função <code>read_csv2()</code> do pacote <code>readr</code>, porém poderia ser considerada qualquer outra função de outros pacotes que importam dados em csv. A checagem se os dados foram obtidos de forma correta pode ser feita novamente com a função <code>head()</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(indicadores)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="a-tibble-6-x-24" class="level4">
<h4 class="anchored" data-anchor-id="a-tibble-6-x-24">A tibble: 6 x 24</h4>
<div class="table-responsive">
<table class="table">
<colgroup>
<col style="width: 1%">
<col style="width: 18%">
<col style="width: 28%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 13%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>PROGRAMA_COMUM</th>
<th>ID_ELO_LOA_RELATIV_IN…</th>
<th>ID_ARQ</th>
<th>DTREF</th>
<th>UG</th>
<th>ANOINICPPA</th>
<th>CODPROGR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><dbl></dbl></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
<td><chr></chr></td>
</tr>
<tr class="even">
<td>1</td>
<td>0</td>
<td>4292</td>
<td>51</td>
<td>31/12/…</td>
<td>0180…</td>
<td>2014</td>
<td>001</td>
</tr>
<tr class="odd">
<td>2</td>
<td>0</td>
<td>4294</td>
<td>51</td>
<td>31/12/…</td>
<td>0210…</td>
<td>2014</td>
<td>002</td>
</tr>
<tr class="even">
<td>3</td>
<td>0</td>
<td>4293</td>
<td>51</td>
<td>31/12/…</td>
<td>0210…</td>
<td>2014</td>
<td>002</td>
</tr>
<tr class="odd">
<td>4</td>
<td>0</td>
<td>4297</td>
<td>51</td>
<td>31/12/…</td>
<td>0210…</td>
<td>2014</td>
<td>003</td>
</tr>
<tr class="even">
<td>5</td>
<td>0</td>
<td>4296</td>
<td>51</td>
<td>31/12/…</td>
<td>0210…</td>
<td>2014</td>
<td>003</td>
</tr>
<tr class="odd">
<td>6</td>
<td>0</td>
<td>4295</td>
<td>51</td>
<td>31/12/…</td>
<td>0210…</td>
<td>2014</td>
<td>003</td>
</tr>
</tbody>
</table>
</div>
<p><em> … with 17 more variables: INDICADOR <chr>, INDICADORORIG <chr>, UNIDINDICADOR <chr>, INDICADORPREVISTO <chr>, INDICADOREFETIVO <chr>, JUSTIFICATIVA <chr>, OBSINTERNA <chr>, PROGRAMA <chr>, ORGAO <chr>, VIRTUALDELETE <chr>, COD_OPERADOR <chr>, DT_ALTERACAO <chr>, HR_ALTERACAO <chr>, CONCORRENCIA <chr>, ENDERECO_FISICO <chr>, CODIGOINDICADOR <chr>, CODIND <chr> </chr></chr></chr></chr></chr></chr></chr></chr></chr></chr></chr></chr></chr></chr></chr></chr></chr></em></p>
</section>
</section>
<section id="arrow" class="level3">
<h3 class="anchored" data-anchor-id="arrow"><code>arrow</code></h3>
<p><strong>Importando dados</strong></p>
<p>Este pacote permite trabalhar de forma eficiente com conjuntos de dados de tamanho massivo em vários formatos diferentes. Nesse pacote é possível importar arquivos de formato .csv, .tsv, .feather entre outros. Algumas de suas funções para importação são:</p>
<ul>
<li><code>read_feather()</code>: Para ler arquivo em formato Feather.</li>
<li><code>read_parquet()</code>: Para ler arquivo Parquet.</li>
<li><code>read_delim_arrow()</code>: Para arquivos delimitados.</li>
<li><code>read_csv_arrow()</code>: Para ler arquivos em formato .csv.</li>
<li><code>read_tsv_arrow()</code>: Para ler arquivos em formato .tsv.</li>
<li><code>read_json_arrow()</code>: Para ler arquivo JSON.</li>
</ul>
<p>Não iremos entrar em detalhes sobre este pacote aqui, mas nesse <a href="https://ursalabs.org/arrow-r-nightly/articles/dataset.html">link</a> vocês podem ver uma aplicação do pacote com uma base de dados com 37GB.</p>
<p><strong>Exportando dados</strong></p>
<p>Este pacote possui algumas funções de exportação de dados como: <code>write_feather()</code>, <code>write_ipc_stream()</code> e <code>write_arrow</code>, elas exportam dados em formato .csv, .txt e .feather.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_feather</span>(diamonds, <span class="st">"exemplo6.feather"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Esses foram apenas alguns dos diversos pacotes e funções que podemos utilizar para importar dados no R. Apesar de alguns pacotes apresentados anteriormente possuirem funções similares, cada um tem suas diferenças. Devemos também entender as diferentes características de cada formato de arquivo e como tirar vantagem deste conhecimento em cada situação. Ao discutir qual formato é o melhor a ser utilizado alguns pontos devem ser levados em conta como: velocidade de importação e exportação, tamanho do arquivo e compatibilidade com outros programas e sistemas.</p>
<p>Mas isso é assunto para outro post. Por enquanto, ficam aqui algumas referências para quem quiser ler mais sobre o assunto.</p>
<!-- Finalizo este deixando o link de um video onde uso todos esses pacotes e funções importando alguns arquivos no Rstudio. -->
</section>
</section>
<section id="referências" class="level1">
<h1>Referências</h1>
<p><a href="https://livro.curso-r.com/index.html" class="uri">https://livro.curso-r.com/index.html</a></p>
<p><a href="https://github.com/Rdatatable/data.table/wiki/Articles" class="uri">https://github.com/Rdatatable/data.table/wiki/Articles</a></p>
<p><a href="https://readxl.tidyverse.org/" class="uri">https://readxl.tidyverse.org/</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p><br>Copyright © 2024 | Made by <a href="https://www.josecarlosinfo.com/"> Jose C. S. Junior</a> | Built with <a href="https://quarto.org/">Quarto</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>