<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pedro de Brito Neto">
<meta name="description" content="Explore o pacote purrr do tidyverse, repleto de ferramentas para manipulação de funções e vetores. Com foco na programação funcional, é uma adição valiosa ao R, ampliando suas capacidades além de sua natureza não intrinsecamente funcional.">

<title>Ronronando com programação funcional e o pacote purrr no R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<link href="../..//img/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(banner.png);
background-size: cover;
      }
</style>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/daslab-logo-removebg.png" alt="" class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Alternar de navegação" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../sobre/index.html" rel="" target="">
 <span class="menu-text">Sobre</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projetos/index.html" rel="" target="">
 <span class="menu-text">Projetos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutoriais/index.html" rel="" target="">
 <span class="menu-text">Tutoriais</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../ensinar/index.html" rel="" target="">
 <span class="menu-text">ensinaR</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../oobr/index.html" rel="" target="">
 <span class="menu-text">OOBr</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../eventos/index.html" rel="" target="">
 <span class="menu-text">Eventos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contato/index.html" rel="" target="">
 <span class="menu-text">Contato</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Ronronando com programação funcional e o pacote purrr no R</h1>
                  <div>
        <div class="description">
          Explore o pacote purrr do tidyverse, repleto de ferramentas para manipulação de funções e vetores. Com foco na programação funcional, é uma adição valiosa ao R, ampliando suas capacidades além de sua natureza não intrinsecamente funcional.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">Programação</div>
                <div class="quarto-category">Data Wrangling</div>
                <div class="quarto-category">Análise Preditiva</div>
                <div class="quarto-category">Análise de Dados</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Autor</div>
      <div class="quarto-title-meta-contents">
               <p>Pedro de Brito Neto </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Data de Publicação</div>
      <div class="quarto-title-meta-contents">
        <p class="date">1 de agosto de 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<style>
body {
    background: white;
}

.quarto-title-banner{
    text-align: left !important;
}
</style>
<p>Neste post vamos falar de mais um pacote da família tidyverse: o <code>purrr</code>. O <code>purrr</code> é um pacote que possui diversas ferramentas para trabalhar com funções e vetores. Muitas funções do pacote tem como objetivo aprimorar o uso da programação funcional (FP, do inglês <em>functional programming</em>), já que o R não é uma linguagem diretamente ligada a FP. FP é, em resumo, quando seu código é organizado em funções que realizam as operações de que você precisa, ou seja, em muitos casos você cria suas próprias funções. Aqui vamos tentar mostrar como usar o <code>purrr</code> focando na sua principal função: <code>map()</code>.</p>
<p>Como já dito, o pacote pertence ao <code>tidyverse</code> então você pode carregá-lo pelo usando o comando <code>library(tidyverse)</code> ou separadamente <code>library(purrr)</code>. Para os exemplos do post iremos trabalhar com um banco de dados <code>iris</code> que o próprio R possui. Você pode carregar bases de dados que o R possui utilizando o comando <code>data()</code></p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="map" class="level1">
<h1>map()</h1>
<p>Dentre as diversas funções do pacote <code>purrr</code> uma das mais conhecidas e utilizadas é a <code>map()</code> e suas variações, nada mais justo do que começar falando dela. Essa função (e suas variações) é usada para aplicar a mesma ação/função a todos elementos de um objeto. Esses objetos podem ser uma lista, um vetor, variáveis de um banco de dados, etc. Esse tipo de função é muito útil para evitar usar <em>loops</em> e <code>for</code>’s.</p>
<p>Se em algum momento você já fez uso da família de funções <code>apply()</code> você pode ter percebido uma certa semelhança entre elas. Existem algumas discussões entre o uso das funções <code>apply()</code> e <code>map()</code>. Não é o foco deste post fazer uma comparação aprofundada sobre essas funções, mas podemos trazer alguns pontos. De forma geral, escolher qual delas usar vai depender de um contexto. Em questão de tempo bruto de execução, a família <code>apply()</code> é ligeiramente mais rápida (a diferença é bem pequena), porém as funções de <code>map()</code> são mais convenientes. Todas as suas variações seguem a mesma ordem de argumentos (o primeiro argumento é sempre o vetor), diferente da família <code>apply()</code>, onde os argumentos podem mudar. Existem mais pontos a serem considerados, mas em resumo, se ignorar questões de sintaxe e funcionalidade (as variações de <code>map()</code>), decidir qual delas usar restringe-se a usar as funções base do R ou utilizar funções obtidas por meio de pacotes, neste caso o <code>purrr</code>.</p>
<p>Voltando ao foco, vamos mostrar algumas variações (não todas) de <code>map()</code>.</p>
<ul>
<li><p><code>map(.x, .f)</code> é a principal função de mapeamento e retorna uma lista.</p></li>
<li><p><code>map_df(.x, .f)</code> retorna um <code>data.frame</code>.</p></li>
<li><p><code>map_dbl(.x, .f)</code> retorna um vetor numérico (duplo).</p></li>
<li><p><code>map_chr(.x, .f)</code> retorna um vetor de caracteres.</p></li>
<li><p><code>map_lgl(.x, .f)</code> retorna um vetor lógico.</p></li>
</ul>
<p>Essas funções, assim como a maiores das funções do universo <code>tidyverse</code>, tem como primeiro argumento o objeto a qual você deseja aplicar uma certa função e o segundo argumento é a função a ser aplicada em cada elemento do seu objeto. Para ficar mais claro vamos a uma breve aplicação e ao decorrer do post, iremos utilizar mais as outras funções. Vamos criar um vetor com poucos elementos para usar como exemplo, depois criar uma função qualquer e usar o <code>map()</code> para aplicar essa função em cada elemento do vetor.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>vetor_ex <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>, <span class="dv">12</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>funcao1 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(x<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(vetor_ex, funcao1)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[[1]]</td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>0</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td>[[2]]</td>
<td></td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>9</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>[[3]]</td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>36</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td>[[4]]</td>
<td></td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>81</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>[[5]]</td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>144</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_chr</span>(vetor_ex, funcao1)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<colgroup>
<col style="width: 4%">
<col style="width: 16%">
<col style="width: 20%">
<col style="width: 19%">
<col style="width: 19%">
<col style="width: 20%">
</colgroup>
<tbody>
<tr class="odd">
<td>[1]</td>
<td>“0.000000”</td>
<td>“9.000000”</td>
<td>“36.000000”</td>
<td>“81.000000”</td>
<td>“144.000000”</td>
</tr>
</tbody>
</table>
</div>
<p>Note que usar apenas <code>map()</code>, como dito antes, irá retornar uma lista onde o primeiro elemento da saída é o resultado da aplicação da função ao primeiro elemento da entrada e assim por diante. Já quando usamos <code>map_chr()</code> a função nos retorna um vetor de caracteres.</p>
<p>Vamos agora criar uma lista com alguns vetores de tamanhos diferentes. Caso a gente queira, por exemplo, tirar a média de cada um dos vetores dentro da lista, precisaríamos fazer isso acessando cada elemento da lista, criando funções complexas ou utilizando <code>for</code>’s e <em>loops</em>. Veja abaixo como o <code>map()</code> pode nos ajudar.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>lista_ex <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">10</span>),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>lista_ex</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[[1]]</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>[[2]]</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>0</td>
<td>10</td>
<td>20</td>
<td>30</td>
<td>40</td>
<td>50</td>
<td>60</td>
<td>70</td>
<td>80</td>
<td>90</td>
<td>100</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>[[3]]</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>lista_ex <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(mean)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[[1]]</td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>2</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td>[[2]]</td>
<td></td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>50</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>[[3]]</td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>5.5</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>lista_ex <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map_dbl</span>(sd)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>1.00000</td>
<td>33.16625</td>
<td>3.02765</td>
</tr>
</tbody>
</table>
</div>
<p>Note também que fizemos o uso da função junto com o <em>pipe</em> (<code>%&gt;%</code>) e é bem comum essa prática. Lembrando que já explicamos como utilizar o <em>pipe</em>, caso tenha alguma dúvida você pode acessar o post que contém essa explicação clicando <a href="https://daslab-ufes.github.io/tidyverse/">aqui</a>.</p>
<p>Nos exemplos acima utilizamos uma função criada por nós e outras já presentes dentro do R. Além dessas, também é possível utilizar o que chamamos de funções anônimas. Uma função anônima é basicamente uma função criada e usada, mas nunca atribuída a um objeto. Esse tipo de função é bem útil dentro do <code>map()</code>. Para usar essa função você começa com um <code>~</code> (para indicar que você começou uma função anônima). O argumento da função é consultado utilizando o <code>.x</code> ou apenas <code>.</code>, diferente das funções normais onde você consegue usar qualquer argumento. Para ficar mais claro vamos a um exemplo.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(vetor_ex, <span class="sc">~</span> .x<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>0</td>
<td>9</td>
<td>36</td>
<td>81</td>
<td>144</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>vetor_ex <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map_dbl</span>(<span class="sc">~</span> .x<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>0</td>
<td>9</td>
<td>36</td>
<td>81</td>
<td>144</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>vetor_ex <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map_dbl</span>(<span class="sc">~</span> .<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>0</td>
<td>9</td>
<td>36</td>
<td>81</td>
<td>144</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>vetor_ex <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map_dbl</span>(<span class="sc">~</span> {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>        .x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    })</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>0</td>
<td>9</td>
<td>36</td>
<td>81</td>
<td>144</td>
</tr>
</tbody>
</table>
</div>
<p>Acima mostramos maneiras diferentes de utilizar funções anônimas. Todas retornam o mesmo resultado (e deveriam). Um destaque para a última onde foi usado <code>{}</code>. O uso das chaves é interessante para organização e boas práticas no seu código, principalmente se a sua função for mais complexa.</p>
<p>Uma função muito útil também é a <code>modify()</code>. Ela funciona de forma igual à função <code>map()</code>, a diferença é que ela sempre irá retornar um objeto do mesmo tipo que o objeto de entrada. Por exemplo, se meu objeto de entrada for um vetor de caracteres, a saída também será um vetor de caracteres. Note que isso pode ser considerado como uma boa prática e já fizemos um post sobre isso no software R disponível <a href="https://daslab-ufes.github.io/boas-praticas/">aqui</a>.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>objeto <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">11</span>),</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">modify</span>(objeto, funcao1)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td></td>
<td>x</td>
<td>y</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>81</td>
</tr>
<tr class="odd">
<td>2</td>
<td>100</td>
<td>400</td>
</tr>
<tr class="even">
<td>3</td>
<td>121</td>
<td>900</td>
</tr>
</tbody>
</table>
</div>
<p>A função <code>modify()</code> possui uma variação interessante. A <code>modify_if()</code> permite que você forneça um critério e assim, a função só será aplicada aos elementos que atendam a esse critério. O critério torna-se o segundo argumento da função, ou seja, o primeiro argumento continua sendo o objeto de entrada, o segundo passa a ser o critério e o terceiro argumento é a função. Para ficar mais claro vamos a um exemplo</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modify_if</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    vetor_ex,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> . <span class="sc">&gt;=</span> <span class="dv">9</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    funcao1</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>0</td>
<td>3</td>
<td>6</td>
<td>81</td>
<td>144</td>
</tr>
</tbody>
</table>
</div>
<p>Veja que a função só foi aplicada para valores maiores ou iguais a 9.</p>
<p>Agora que temos uma noção de como funciona as funções <code>map()</code>, vamos deixar as coisas um pouco mais interessantes trabalhando com uma base de dados. Para os exemplos do post iremos trabalhar com um banco de dados “iris” que o próprio R possui. Você pode olhar bases de dados que o R possui utilizando o comando <code>data()</code></p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> iris</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># visualizando os 10 primeiros dados da tabela</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(dados, <span class="dv">10</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">Sepal.Length</th>
<th style="text-align: right;">Sepal.Width</th>
<th style="text-align: right;">Petal.Length</th>
<th style="text-align: right;">Petal.Width</th>
<th style="text-align: left;">Species</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">3.6</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">5.4</td>
<td style="text-align: right;">3.9</td>
<td style="text-align: right;">1.7</td>
<td style="text-align: right;">0.4</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">3.4</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.3</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">3.4</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.4</td>
<td style="text-align: right;">2.9</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.1</td>
<td style="text-align: left;">setosa</td>
</tr>
</tbody>
</table>
</div>
<p>Como estamos trabalhando com uma base de dados, as funções serão aplicadas em cada coluna. Por exemplo, ao aplicar uma função para resumir de alguma maneira os dados, ela irá fazer isso para cada uma das colunas. Vamos começar utilizando a função <code>n_distinct()</code> do pacote <code>dplyr</code> que nos retorna o número de valores distintos em cada coluna.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(n_distinct)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td><code>$Sepal.Length</code></td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>35</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td><code>$Sepal.Length</code></td>
<td></td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>23</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><code>$Petal.Length</code></td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>43</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td><code>$Petal.Length</code></td>
<td></td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>22</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><code>$Species</code></td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>3</td>
</tr>
</tbody>
</table>
</div>
<p>Observe que <code>map()</code> aplicou a função desejada em cada uma das 5 variáveis do nosso banco de dados e retornou o valor correspondente.</p>
<p>Vamos começar a fazer algo mais elaborado. Podemos querer retornar algumas medidas resumos ou outras informações gerais sobre nossos dados em uma base de dados. Esse é um momento bem legal e útil de utilizar o <code>map_df()</code>, uma das funções mais poderosas do pacote. Basicamente utilizamos a estrutura <code>map_df( ~ data_frame(x = .x" )</code>, onde x = o nome da coluna e .x a função anônima. Pra ficar mais claro, vamos à pratica.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>dados1 <span class="ot">&lt;-</span> <span class="fu">select_if</span>(dados, is.numeric)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>dados1 <span class="ot">&lt;-</span> dados1 <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> (<span class="fu">data.frame</span>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">v_distintos =</span> <span class="fu">n_distinct</span>(.x),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">classe =</span> <span class="fu">class</span>(.x),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">media =</span> <span class="fu">round</span>(<span class="fu">mean</span>(.x), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">desvio_p =</span> <span class="fu">round</span>(<span class="fu">sd</span>(.x), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">minimo =</span> <span class="fu">min</span>(.x),</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">maximo =</span> <span class="fu">max</span>(.x)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    )),</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">"variavel"</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>dados1</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>No exemplo acima, começamos utilizando a função <code>select_if()</code> do pacote <code>dplyr</code> para pegar do banco de dados original apenas as variáveis do tipo númericas e armazenamos em um outro banco de dados (apenas para facilitar o entendimento). Após isso já começamos a pensar na medidas que queremos para acrescentar no banco de dados. Adicionamos então os valores distintos de cada variável, as classes (apenas para mostrar que <code>select_if()</code> fez o que queriamos) e algumas medidas resumo como média, desvio padrão, valores máximos e mínimos. Uma observação importante é que ao utilizar essa função de <code>map()</code>, o nome das variáveis são perdidos, por isso ao fim do código foi utilizado o <code>.id</code> (argumento de <code>map_df()</code>) para incluir o nome das variáveis. Veja o resultado.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(dados1))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<colgroup>
<col style="width: 21%">
<col style="width: 21%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">variavel</th>
<th style="text-align: right;">v_distintos</th>
<th style="text-align: left;">classe</th>
<th style="text-align: right;">media</th>
<th style="text-align: right;">desvio_p</th>
<th style="text-align: right;">minimo</th>
<th style="text-align: right;">maximo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Sepal.Length</td>
<td style="text-align: right;">35</td>
<td style="text-align: left;">numeric</td>
<td style="text-align: right;">5.84</td>
<td style="text-align: right;">0.83</td>
<td style="text-align: right;">4.3</td>
<td style="text-align: right;">7.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sepal.Width</td>
<td style="text-align: right;">23</td>
<td style="text-align: left;">numeric</td>
<td style="text-align: right;">3.06</td>
<td style="text-align: right;">0.44</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">4.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Petal.Length</td>
<td style="text-align: right;">43</td>
<td style="text-align: left;">numeric</td>
<td style="text-align: right;">3.76</td>
<td style="text-align: right;">1.77</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">6.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Petal.Width</td>
<td style="text-align: right;">22</td>
<td style="text-align: left;">numeric</td>
<td style="text-align: right;">1.20</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">0.1</td>
<td style="text-align: right;">2.5</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="map2" class="level1">
<h1>map2()</h1>
<p>Após obtermos uma certa noção de como funcionam as funções de <code>map()</code> podemos falar de sua outra versão, a <code>map2()</code>. Essa função segue os mesmos critérios que a <code>map()</code> “original”, porém permite que você trabalhe não só com um, mas com dois objetos. Em <code>map2()</code> também conseguimos especificar o tipo de saída da função, segue abaixo a lista de algumas das variações da função.</p>
<ul>
<li><p><code>map2 (.x, .y, .f, ...)</code></p></li>
<li><p><code>map2_dfc (.x, .y, .f, ...)</code></p></li>
<li><p><code>map2_dbl (.x, .y, .f, ...)</code></p></li>
<li><p><code>map2_chr (.x, .y, .f, ...)</code></p></li>
<li><p><code>map2_lgl (.x, .y, .f, ...)</code></p></li>
</ul>
<p>Lembrando que <code>.x</code> e <code>.y</code> são os vetores da função e devem ter o mesmo tamanho, caso contrário a função retornará uma mensagem de erro.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dados3 <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Sepal.Width, Species) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<colgroup>
<col style="width: 100%">
</colgroup>
<tbody>
<tr class="odd">
<td><code>summarise()</code> has grouped output by ‘Sepal.Width’. You can override using the <code>.groups</code> argument.</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>largura <span class="ot">&lt;-</span> dados3<span class="sc">$</span>Sepal.Width</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>especie <span class="ot">&lt;-</span> dados3<span class="sc">$</span>Species</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>fmp2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) <span class="fu">paste</span>(<span class="st">"Espécie:"</span>, x, <span class="st">"largura:"</span>, y)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">map2</span>(especie, largura, fmp2) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[[1]]</td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>“Espécie: versicolor largura: 2”</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td>[[2]]</td>
<td></td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>“Espécie: versicolor largura: 2.2”</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>[[3]]</td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>“Espécie: virginica largura: 2.2”</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td>[[4]]</td>
<td></td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>“Espécie: setosa largura: 2.3”</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>[[5]]</td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>“Espécie: versicolor largura: 2.3”</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>Acima criamos dois vetores, cada um contendo uma variável do banco de dados e depois criamos uma função simples, que irá concatenar, nesse caso, os dois vetores com algumas frases. Note que a função foi aplicada aos dois vetores. Uma observação é que no começo do exemplo criamos um outro banco de dados (dados3) com apenas as duas variáveis que foi usada no exemplo e agrupamos elas utlizando <code>group_by()</code> e<code>summarise()</code>. Isso foi feito apenas para que fosse possível ver os resultados com observações diferentes na saida da função.</p>
<p>É possível utilizar o <code>map()</code> para mais de dois objetos. Neste caso não existe um <code>map3()</code> ou <code>map4()</code> mas sim o <code>pmap()</code>. <code>pmap()</code> é basicamente uma generalização de <code>map2()</code> para 3 ou mais objetos. Essa função possui uma pequena diferença, nesse caso você não irá especificar n objetos dentro da função, mas sim apenas uma única lista que contém todos os vetores (ou listas).</p>
<section id="um-uso-um-pouco-mais-elaborado-de-map2" class="level3">
<h3 class="anchored" data-anchor-id="um-uso-um-pouco-mais-elaborado-de-map2">Um uso um pouco mais elaborado de “map2()”</h3>
<p>Para esse exemplo, vejamos a função <code>split</code> que nos será útil. Usaremos essa função que divide os dados de entrada (x) em grupos diferentes (f). Um breve exemplo de como a função funciona.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>sp <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">25</span>, <span class="at">b =</span> <span class="st">"exemplo"</span>, <span class="at">a =</span> <span class="st">"split"</span>, <span class="at">a =</span> <span class="dv">3</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>sp</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>a</td>
<td>b</td>
<td>b</td>
<td>a</td>
<td>a</td>
</tr>
<tr class="even">
<td>“1”</td>
<td>“25”</td>
<td>“exemplo”</td>
<td>“split”</td>
<td>“3”</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">split</span>(sp, <span class="at">f =</span> <span class="fu">names</span>(sp))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td><code>$a</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>a</td>
<td>a</td>
<td>a</td>
</tr>
<tr class="odd">
<td></td>
<td>“1”</td>
<td>“split”</td>
<td>“3”</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><code>$b</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>b</td>
<td>b</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>“25”</td>
<td>“exemplo”</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>Note que o objeto <code>sp</code> foi separado em duas listas de acordo com os nomes do vetor.</p>
<p>Agora considerando os dados <code>iris</code>, separamos os dados em listas de acordo com as espécies. No caso do nosso exemplo o objeto “especies” vai ser uma lista com as 3 especies presentes no banco de dados iris.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>especies <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">split</span>(.<span class="sc">$</span>Species)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Uma forma de observar o resultado obtido é verificar a classe e as dimensões de cada uma das partes obtidas, utilizando a função <code>map</code>.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>especies <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map_chr</span>(class)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>setosa</td>
<td>versicolor</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>“data.frame”</td>
<td>“data.frame”</td>
<td>“data.frame”</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>especies <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(dim)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td><code>$setosa</code></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>50</td>
<td>5</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><code>$versicolor</code></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>50</td>
<td>5</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><code>$virginica</code></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>50</td>
<td>5</td>
</tr>
</tbody>
</table>
</div>
<p>Para checar que a divisão foi feita de forma correta, podemos avaliar o banco de dados original e contar a quantidade de observações para cada tipo de espécie.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(iris<span class="sc">$</span>Species)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>setosa</td>
<td>versicolor</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>50</td>
<td>50</td>
<td>50</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>modelos <span class="ot">&lt;-</span> especies <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(Sepal.Length <span class="sc">~</span> Petal.Length, .))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Depois partimos para criar o nosso modelo. Com ajuda da função <code>map()</code>, utilizamos a função <code>lm()</code> para ajustar um modelo de regressão linear. A função <code>lm()</code> possui vários argumentos e maneiras de utilizar, não é nosso foco aprofundar nessa função, mas você pode saber mais clicando <a href="https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/lm">aqui</a>. De maneira geral, fornecemos à função uma variável preditora (ou independente) que nesse caso foi <code>Petal.Length</code> e a variável dependente (aquela que estamos tentando explicar) que foi <code>Sepal.Length</code>. O segundo argumento é o banco de dados, nesse caso utilizamos <code>.</code>, pois gostaríamos de ajustar um modelo linear para cada elemento da lista de banco de dados. Vamos imprimir o resultado para entender melhor o que foi feito.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>especies <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(Sepal.Length <span class="sc">~</span> Petal.Length, .))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td><code>$setosa</code></td>
</tr>
<tr class="even">
<td>Call:</td>
</tr>
<tr class="odd">
<td>lm(formula = Sepal.Length ~ Petal.Length, data = .)</td>
</tr>
<tr class="even">
<td>Coefficients:</td>
</tr>
<tr class="odd">
<td>(Intercept) Petal.Length</td>
</tr>
<tr class="even">
<td>4.2132 0.5423</td>
</tr>
<tr class="odd">
<td></td>
</tr>
<tr class="even">
<td><code>$versicolor</code></td>
</tr>
<tr class="odd">
<td>Call:</td>
</tr>
<tr class="even">
<td>lm(formula = Sepal.Length ~ Petal.Length, data = .)</td>
</tr>
<tr class="odd">
<td>Coefficients:</td>
</tr>
<tr class="even">
<td>(Intercept) Petal.Length</td>
</tr>
<tr class="odd">
<td>2.4075 0.8283</td>
</tr>
<tr class="even">
<td></td>
</tr>
<tr class="odd">
<td><code>$virginica</code></td>
</tr>
<tr class="even">
<td>Call:</td>
</tr>
<tr class="odd">
<td>lm(formula = Sepal.Length ~ Petal.Length, data = .)</td>
</tr>
<tr class="even">
<td>Coefficients:</td>
</tr>
<tr class="odd">
<td>(Intercept) Petal.Length</td>
</tr>
<tr class="even">
<td>1.0597 0.9957</td>
</tr>
</tbody>
</table>
</div>
<p>Note que a função estimou uma reta com dois parâmetros: intercepto e a inclinação da reta segundo a variável preditora. Essa reta tenta explicar o comprimento médio da pétala (Petal.Length) como função do comprimento da sépala (Sepal.Length). Repare que os interceptos são bem distintos entre os três ajustes e a inclinação entre as espécies <code>versicolor</code> e <code>virginica</code> são bem parecidas, de acordo com o resultado impresso. Esse resultado pode ser visualizado com a ajuda do pacote <code>ggplot2</code> com o seguinte código.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Petal.Length, Sepal.Length, <span class="at">colour =</span> Species)) <span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> lm)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td><code>geom_smooth()</code> using formula ‘y ~ x’</td>
</tr>
</tbody>
</table>
</div>
<center>
<img src="unnamed-chunk-18-1.png" class="img-fluid"><!-- -->
</center>
<p>Note que as retas estimam uma relação linear entre o valor médio do comprimento da pétala como função do comprimento da sépala, para cada uma das espécies.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>predicoes <span class="ot">&lt;-</span> <span class="fu">map2</span>(modelos, especies, predict)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Por fim fizemos o uso de <code>map2()</code> com os os objetos “modelos” e “especies”, e aplicamos a função <code>predict()</code>. Em resumo, <code>predict()</code> serve para prever valores tendo como base um modelo (você pode se aprofundar nessa função clicando <a href="https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/predict.lm">aqui</a>). Nesse caso, estamos obtendo as predições de cada um dos modelos estimados, para cada uma das observações considerando os diferentes bancos de dados, armazenados no objeto <code>especies</code>. Podemos visualizar os resultados obtidos fazendo um gráfico simples de pontos e comparar com o gráfico anterior do modelo estimado.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(predicoes) <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">plot</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> especies[[.]]<span class="sc">$</span>Petal.Length,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> predicoes[[.]], <span class="at">xlab =</span> <span class="st">"Petal.Length"</span>, <span class="at">ylab =</span> <span class="st">"Valor predito"</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">invisible</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<center>
<img src="unnamed-chunk-20-1.png" class="img-fluid"><!-- --><img src="unnamed-chunk-20-2.png" class="img-fluid"><!-- --><img src="unnamed-chunk-20-3.png" class="img-fluid"><!-- -->
</center>
<p>Nesse exemplo, nós utilizamos o comprimento do objeto <code>predicoes</code> para acessar as diferentes predições e suas respectivas variáveis preditoras. Veja que como os dois objetos <code>especies</code> e <code>predicoes</code> são uma lista, nós utilizamos o operador <code>[[]]</code> para acessar suas posições. Note que para cada valor de <code>x</code> (<code>Petal.Length</code>) existe um valor predito segundo o modelo ajustado e todos estão descritos de acordo com uma reta, que foi aquela estimada segundo a função <code>lm</code>. A função <code>invisible()</code> foi utilizada somente para evitar a impressão de uma lista de valores <code>NULL</code> ao final do processo. Veja como seria o resultado sem essa função e compare.</p>
</section>
</section>
<section id="manipulações-de-listas" class="level1">
<h1>Manipulações de listas</h1>
<p>Para mostrar algumas funções do <code>purrr</code> que nos auxiliam na manipulação de listas, vamos transformar o banco de dados que estamos usando (<code>iris</code>) em uma lista de banco de dados. Já fizemos isso no exemplo anterior, mas aqui para garantir que seja fácil de seguir e visualizar, vamos usar apenas as primeiras 5 linhas de cada espécie.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>dados4 <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">split</span>(.<span class="sc">$</span>Species) <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">slice_head</span>(., <span class="at">n =</span> <span class="dv">5</span>))</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>dados4</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="setosa" class="level4">
<h4 class="anchored" data-anchor-id="setosa">$setosa</h4>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td></td>
<td>Sepal.Length</td>
<td>Sepal.Width</td>
<td>Petal.Length</td>
<td>Petal.Width</td>
<td>Species</td>
</tr>
<tr class="even">
<td>1</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>2</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>3</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>4</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>5</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="versicolor" class="level4">
<h4 class="anchored" data-anchor-id="versicolor">$versicolor</h4>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td></td>
<td>Sepal.Length</td>
<td>Sepal.Width</td>
<td>Petal.Length</td>
<td>Petal.Width</td>
<td>Species</td>
</tr>
<tr class="even">
<td>1</td>
<td>7.0</td>
<td>3.2</td>
<td>4.7</td>
<td>1.4</td>
<td>versicolor</td>
</tr>
<tr class="odd">
<td>2</td>
<td>6.4</td>
<td>3.2</td>
<td>4.5</td>
<td>1.5</td>
<td>versicolor</td>
</tr>
<tr class="even">
<td>3</td>
<td>6.9</td>
<td>3.1</td>
<td>4.9</td>
<td>1.5</td>
<td>versicolor</td>
</tr>
<tr class="odd">
<td>4</td>
<td>5.5</td>
<td>2.3</td>
<td>4.0</td>
<td>1.3</td>
<td>versicolor</td>
</tr>
<tr class="even">
<td>5</td>
<td>6.5</td>
<td>2.8</td>
<td>4.6</td>
<td>1.5</td>
<td>versicolor</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="virginica" class="level4">
<h4 class="anchored" data-anchor-id="virginica">$virginica</h4>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td></td>
<td>Sepal.Length</td>
<td>Sepal.Width</td>
<td>Petal.Length</td>
<td>Petal.Width</td>
<td>Species</td>
</tr>
<tr class="even">
<td>1</td>
<td>6.3</td>
<td>3.3</td>
<td>6.0</td>
<td>2.5</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>2</td>
<td>5.8</td>
<td>2.7</td>
<td>5.1</td>
<td>1.9</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>3</td>
<td>7.1</td>
<td>3.0</td>
<td>5.9</td>
<td>2.1</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>4</td>
<td>6.3</td>
<td>2.9</td>
<td>5.6</td>
<td>1.8</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>5</td>
<td>6.5</td>
<td>3.0</td>
<td>5.8</td>
<td>2.2</td>
<td>virginica</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="keep-discard-e-compact" class="level3">
<h3 class="anchored" data-anchor-id="keep-discard-e-compact">keep(), discard() e compact()</h3>
<p>A função <code>keep()</code> e <code>discard()</code> são bem parecidas e <em>opostas</em>. <code>keep()</code> mantém apenas os elementos de uma lista que satisfazem uma determinada condição, enquanto <code>discard()</code> faz exatamente o oposto (descarta quaisquer elementos que satisfaçam a condição lógica). Essas funções possuem 2 argumentos principais, <code>.x</code> uma lista ou vetor e <code>.p</code> uma função. Apenas aqueles elementos <code>.p</code> avaliados como <code>TRUE</code> serão mantidos ou descartados. Também é possível, como terceiro argumento, fornecer argumentos adicionais transmitidos para “.p”. A função <code>compact()</code> tem argumentos parecidos com as funções anteriores, a diferença é que para essa função, o <code>.p</code> é uma função que é aplicada a cada elemento de <code>.x</code> e somente aqueles elementos <code>.p</code> avaliados como um vetor vazio (<code>NULL</code> ou listas com comprimento zero) serão descartados.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>dados4 <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">keep</span>(<span class="sc">~</span> {</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mean</span>(.x<span class="sc">$</span>Petal.Width) <span class="sc">&gt;</span> <span class="fl">0.5</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    })</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="versicolor-1" class="level4">
<h4 class="anchored" data-anchor-id="versicolor-1">$versicolor</h4>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td></td>
<td>Sepal.Length</td>
<td>Sepal.Width</td>
<td>Petal.Length</td>
<td>Petal.Width</td>
<td>Species</td>
</tr>
<tr class="even">
<td>1</td>
<td>7.0</td>
<td>3.2</td>
<td>4.7</td>
<td>1.4</td>
<td>versicolor</td>
</tr>
<tr class="odd">
<td>2</td>
<td>6.4</td>
<td>3.2</td>
<td>4.5</td>
<td>1.5</td>
<td>versicolor</td>
</tr>
<tr class="even">
<td>3</td>
<td>6.9</td>
<td>3.1</td>
<td>4.9</td>
<td>1.5</td>
<td>versicolor</td>
</tr>
<tr class="odd">
<td>4</td>
<td>5.5</td>
<td>2.3</td>
<td>4.0</td>
<td>1.3</td>
<td>versicolor</td>
</tr>
<tr class="even">
<td>5</td>
<td>6.5</td>
<td>2.8</td>
<td>4.6</td>
<td>1.5</td>
<td>versicolor</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="virginica-1" class="level4">
<h4 class="anchored" data-anchor-id="virginica-1">$virginica</h4>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td></td>
<td>Sepal.Length</td>
<td>Sepal.Width</td>
<td>Petal.Length</td>
<td>Petal.Width</td>
<td>Species</td>
</tr>
<tr class="even">
<td>1</td>
<td>6.3</td>
<td>3.3</td>
<td>6.0</td>
<td>2.5</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>2</td>
<td>5.8</td>
<td>2.7</td>
<td>5.1</td>
<td>1.9</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>3</td>
<td>7.1</td>
<td>3.0</td>
<td>5.9</td>
<td>2.1</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>4</td>
<td>6.3</td>
<td>2.9</td>
<td>5.6</td>
<td>1.8</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>5</td>
<td>6.5</td>
<td>3.0</td>
<td>5.8</td>
<td>2.2</td>
<td>virginica</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>dados4 <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">discard</span>(<span class="sc">~</span> {</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mean</span>(.x<span class="sc">$</span>Petal.Width) <span class="sc">&gt;</span> <span class="fl">0.5</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    })</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="setosa-1" class="level4">
<h4 class="anchored" data-anchor-id="setosa-1">$setosa</h4>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td></td>
<td>Sepal.Length</td>
<td>Sepal.Width</td>
<td>Petal.Length</td>
<td>Petal.Width</td>
<td>Species</td>
</tr>
<tr class="even">
<td>1</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>2</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>3</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>4</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>5</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(<span class="at">a =</span> <span class="st">"a"</span>, <span class="at">b =</span> <span class="cn">NULL</span>, <span class="at">c =</span> <span class="fu">integer</span>(<span class="dv">0</span>), <span class="at">d =</span> <span class="cn">NA</span>, <span class="at">e =</span> <span class="fu">list</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">compact</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td><code>$a</code></td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>“a”</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td><code>$d</code></td>
<td></td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>NA</td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="every-some-e-none" class="level3">
<h3 class="anchored" data-anchor-id="every-some-e-none">every(), some() e none()</h3>
<p>Caso a gente queira saber se todos, alguns ou nenhum dos elementos de uma lista satisfazem um determinado critério, podemos usar as funções <code>every()</code>, <code>some()</code> e <code>none()</code>, respectivamente. Essas funções são básicas e possuem apenas dois argumentos, sendo o primeiro uma lista ou vetor, e o segundo argumento é o critério. A saída da função será valores lógicos (<code>TRUE</code> ou <code>FALSE</code>).</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>dados4 <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">every</span>(<span class="sc">~</span> {</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mean</span>(.x<span class="sc">$</span>Petal.Width) <span class="sc">&gt;</span> <span class="fl">0.5</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    })</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>FALSE</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>dados4 <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">some</span>(<span class="sc">~</span> {</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mean</span>(.x<span class="sc">$</span>Petal.Width) <span class="sc">&gt;</span> <span class="fl">0.5</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    })</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>TRUE</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>dados4 <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">none</span>(<span class="sc">~</span> {</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mean</span>(.x<span class="sc">$</span>Petal.Width) <span class="sc">&gt;</span> <span class="dv">20</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    })</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>TRUE</td>
</tr>
</tbody>
</table>
</div>
<p>Aqui podemos puxar um gancho para uma outra fução de pesquisa que também retorna um valor lógico, <code>has_element</code>. Basicamente serve para testar se uma lista ou vetor contém um determinado objeto, a função tem o seguinte formato:</p>
<ul>
<li><code>has_element(.x, .y)</code></li>
</ul>
<p>onde <code>.x</code> é a lista ou vetor e <code>.y</code> o objeto para testar</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">has_element</span>(dados<span class="sc">$</span>Petal.Width, <span class="fl">1.0</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>TRUE</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">has_element</span>(dados<span class="sc">$</span>Species, <span class="fl">1.0</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>FALSE</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="detect" class="level3">
<h3 class="anchored" data-anchor-id="detect">detect()</h3>
<p>A função <code>detect()</code> serve para encontrar o valor ou posição da primeira correspondência. Em outras palavras, ela retorna o primeiro elemento que passa no teste ou condição lógica.</p>
<ul>
<li><code>detect(.x, .f, ..., .right = FALSE, .p)</code></li>
</ul>
<p><code>.x</code> é o argumento da função onde você fornece uma lista ou vetor atômico, <code>.f</code> uma função, fórmula ou vetor atômico.</p>
<p>Se uma fórmula , por exemplo <code>~ .x + 2</code>, ela é convertida em uma função. Existem três maneiras de se referir aos argumentos:</p>
<ul>
<li><p>Para uma função de argumento único, use <code>.</code></p></li>
<li><p>Para uma função de dois argumentos, use <code>.x</code> e <code>.y</code></p></li>
<li><p>Para mais argumentos, utilização <code>..1</code>, <code>..2</code>, <code>..3</code> etc</p></li>
</ul>
<p>Vamos a um exemplo simples para entender melhor a função.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>exemplo <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"exemplo"</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="st">"purrr"</span>, <span class="st">"DasLab"</span>, <span class="dv">3</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">detect</span>(exemplo, is.numeric)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<p>Como dito antes, ela irá retornar o primeiro valor que responde ao critério usado (segundo argumento). Quando se trata de funções deste tipo (detectar), o pacote <code>stringr</code> pode ser mais interessante. Já fizemos um post muito massa sobre este pacote, basta clicar <a href="https://daslab-ufes.github.io/stringr/">aqui</a> para acessá-lo.</p>
<hr>
<p>O <code>purrr</code> possui diversas funções, muitas delas não aparecem nesse post. Aqui focamos em explicar as funções que são mais utilizadas e algumas mais simples. As funções de <code>purrr</code> possuem uma sintaxe muito parecida, então se entender bem as funções que trouxemos aqui, as outras serão bem mais fáceis de entender. Vale lembrar que você pode acessar o cheatsheet para ver todas as funções clicando <a href="https://github.com/rstudio/cheatsheets/blob/master/purrr.pdf">aqui</a>.</p>
</section>
</section>
<section id="referências" class="level1">
<h1>Referências</h1>
<p><a href="https://www.rebeccabarter.com/blog/2019-08-19_purrr/" class="uri">https://www.rebeccabarter.com/blog/2019-08-19_purrr/</a></p>
<p><a href="https://jennybc.github.io/purrr-tutorial/" class="uri">https://jennybc.github.io/purrr-tutorial/</a></p>
<p><a href="https://www.r-bloggers.com/2020/05/one-stop-tutorial-on-purrr-package-in-r/" class="uri">https://www.r-bloggers.com/2020/05/one-stop-tutorial-on-purrr-package-in-r/</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center"><br>Copyright © 2024 | Made by <a href="https://www.josecarlosinfo.com/"> Jose C. S. Junior</a> | Built with <a href="https://quarto.org/">Quarto</a></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>