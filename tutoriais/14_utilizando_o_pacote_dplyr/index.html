<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Flavia de Jesus">
<meta name="description" content="O dplyr, um pacote do R para manipulação de dados, oferece uma variedade de funções (ou verbos) para operações como filtragem, seleção, classificação, adição ou exclusão de colunas e agregação de dados. Além de suas funções essenciais, o dplyr simplifica a manipulação de dados, tornando o código mais intuitivo e fácil de ler. Aprenda a usar o dplyr no R.">

<title>Utilizando o pacote dplyr</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<link href="../..//img/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-d28d2f3f2f8d76b0baff2f08097e5fbd.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-b97153e1831a0b2bef32c7a7d6cbed29.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(banner.png);
background-size: cover;
      }
</style>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/daslab-logo-removebg.png" alt="" class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Alternar de navegação" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../sobre/index.html"> 
<span class="menu-text">Sobre</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projetos/index.html"> 
<span class="menu-text">Projetos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutoriais/index.html"> 
<span class="menu-text">Tutoriais</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../ensinar/index.html"> 
<span class="menu-text">ensinaR</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../oobr/index.html"> 
<span class="menu-text">OOBr</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../eventos/index.html"> 
<span class="menu-text">Eventos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contato/index.html"> 
<span class="menu-text">Contato</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Utilizando o pacote dplyr</h1>
                  <div>
        <div class="description">
          O dplyr, um pacote do R para manipulação de dados, oferece uma variedade de funções (ou verbos) para operações como filtragem, seleção, classificação, adição ou exclusão de colunas e agregação de dados. Além de suas funções essenciais, o dplyr simplifica a manipulação de dados, tornando o código mais intuitivo e fácil de ler. Aprenda a usar o dplyr no R.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Data Wrangling</div>
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Autor</div>
      <div class="quarto-title-meta-contents">
               <p>Flavia de Jesus </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Data de Publicação</div>
      <div class="quarto-title-meta-contents">
        <p class="date">24 de abril de 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<style>
body {
    background: white;
}

.quarto-title-banner{
    text-align: left !important;
}
</style>
<p>O <code>dplyr</code> é um pacote do R para manipulação de dados. Ele engloba muitas funções, também chamadas de verbos, que realizam diversas operações, tais como: aplicação de filtro, seleção de colunas específicas, classificação de dados, adição ou exclusão de colunas e agregação de dados. Além de possuir várias funções importantíssimas, o <code>dplyr</code> possui outras vantagens, como uma manipulação mais simples nos dados que possibilitam ao código uma escrita mais intuitiva e uma leitura simplificada.</p>
<section id="funções-básicas" class="level3">
<h3 class="anchored" data-anchor-id="funções-básicas"><code>Funções básicas</code></h3>
<p>O <code>dplyr</code> possui muitas funcionalidades, no entanto neste post usaremos apenas as principais, que são:</p>
<ul>
<li><code>rename()</code>: Renomeia as variáveis (colunas).</li>
<li><code>filter()</code>: Filtra registros (linhas).</li>
<li><code>select()</code>: Seleciona variáveis por seus nomes.</li>
<li><code>arrange()</code>: Ordena o <code>data.frame</code> de acordo com os valores de uma(s) coluna(s).</li>
<li><code>mutate()</code>: Cria novas variáveis com funções de variáveis existentes.</li>
<li><code>summarize()</code>: Reduz uma série de valores de uma coluna em um único valor.</li>
</ul>
<p>Todas essas funções recebem no mínimo dois argumentos: o primeiro é o nome do <code>data.frame</code> e depois os argumentos referentes à função (nomes de colunas, funções, condições).</p>
</section>
<section id="dados" class="level3">
<h3 class="anchored" data-anchor-id="dados"><code>Dados</code></h3>
<p>Vamos carregar uma base de dados de testes para explicarmos os exemplos. Escolhemos os dados brasileiros da PNAD de 2017, a Pesquisa Nacional por Amostras de Domicílio, que podem ser obtidos <a href="https://www.ibge.gov.br/estatisticas/multidominio/condicoes-de-vida-desigualdade-e-pobreza/17270-pnad-continua.html?=&amp;t=microdados">aqui</a>. Para esse post, iremos considerar uma amostra dessa base com apenas algumas variáveis e que podem ser baixados clicando no <a href="../../assets/files/pnad_2017_amostra.csv">link</a>. Esses dados contém informações relacionadas ao ano da pesquisa, a capital em que viviam as pessoas entrevistadas no momento da pesquisa, a idade, o sexo, os rendimentos financeiros, a raça, os anos de estudo, se possui alguma ocupação e se recebe o bolsa família. Olhando rapidamente os dados, temos:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pnad_2017 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"pnad_2017_amostra.csv"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pnad_2017) <span class="co"># imprime as primeiras linhas da base atribuída ao objeto pnad_2017.</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 1%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>V2007</th>
<th>VD4016</th>
<th>VD4017</th>
<th>V5002A</th>
<th>V5002A2</th>
<th>V2010</th>
<th>VD3002</th>
<th>VD4002</th>
<th>V1032</th>
<th>V2009</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>17</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>5</td>
<td>NA</td>
<td>116.1286</td>
<td>53</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>16</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>0</td>
<td>NA</td>
<td>295.7786</td>
<td>5</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>27</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>88.6033</td>
<td>10</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>240</td>
<td>2</td>
<td>0</td>
<td>NA</td>
<td>447.0010</td>
<td>32</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>15</td>
<td>15</td>
<td>15</td>
<td>1</td>
<td>1500</td>
<td>600</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>4</td>
<td>1</td>
<td>403.8757</td>
<td>54</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>0</td>
<td>NA</td>
<td>695.0841</td>
<td>10</td>
</tr>
</tbody>
</table>
</div>
<p>Neste exemplo usamos a função <code>read.csv()</code> do pacote base do <code>R</code> para importar nossos dados, porém existem diversas funções e outros pacotes para importar dados que podem ser vistos <a href="https://daslab-ufes.github.io/importando-dados/">aqui</a>.</p>
</section>
<section id="rename" class="level3">
<h3 class="anchored" data-anchor-id="rename"><code>rename()</code></h3>
<p>Vamos começar renomeando as variáveis usando a função <code>rename()</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># carrega o pacote dplyr.</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>pnad <span class="ot">&lt;-</span> <span class="fu">rename</span>(pnad_2017, <span class="at">sexo =</span> V2007, </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">bolsa_familia =</span> V5002A, <span class="at">anos_estudo =</span> VD3002,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">valor_efetivamente_recebido =</span> V5002A2, <span class="at">ocupacao =</span> VD4002,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">rendimento_habitual =</span> VD4016, <span class="at">rendimento_efetivo =</span> VD4017,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">raca =</span> V2010, <span class="at">idade =</span> V2009, <span class="at">peso_domicilio =</span> V1032)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pnad)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 1%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 20%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>17</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>5</td>
<td>NA</td>
<td>116.1286</td>
<td>53</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>16</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>0</td>
<td>NA</td>
<td>295.7786</td>
<td>5</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>27</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>88.6033</td>
<td>10</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>240</td>
<td>2</td>
<td>0</td>
<td>NA</td>
<td>447.0010</td>
<td>32</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>15</td>
<td>15</td>
<td>15</td>
<td>1</td>
<td>1500</td>
<td>600</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>4</td>
<td>1</td>
<td>403.8757</td>
<td>54</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>0</td>
<td>NA</td>
<td>695.0841</td>
<td>10</td>
</tr>
</tbody>
</table>
</div>
<p>As funções de <code>dplyr</code> nunca modificam suas entradas, então se você quiser salvar o resultado, precisará guardar o seu código em algum objeto usando o operador de atribuição <code>&lt;-</code>.</p>
</section>
<section id="filter" class="level3">
<h3 class="anchored" data-anchor-id="filter"><code>filter()</code></h3>
<p>A função <code>filter()</code> permite criar um subconjunto de observações com base em seus valores. O primeiro argumento é o nome do <code>data.frame</code>. O segundo argumento e os subsequentes são as expressões que filtram o <code>data.frame</code>. Por exemplo podemos filtrar todas as pessoas do sexo feminino que responderam a esta pesquisa. Na coluna sexo, o número 1 representa o sexo masculino e o número 2 representa o sexo feminino.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mulheres <span class="ot">&lt;-</span> <span class="fu">filter</span>(pnad, sexo <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mulheres)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 1%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 20%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>27</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>88.6033</td>
<td>10</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>240</td>
<td>2</td>
<td>0</td>
<td>NA</td>
<td>447.0010</td>
<td>32</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>0</td>
<td>NA</td>
<td>695.0841</td>
<td>10</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>24</td>
<td>NA</td>
<td>24</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>7</td>
<td>NA</td>
<td>622.9802</td>
<td>15</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>288.5456</td>
<td>74</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>24</td>
<td>24</td>
<td>24</td>
<td>2</td>
<td>2000</td>
<td>2000</td>
<td>2</td>
<td>NA</td>
<td>2</td>
<td>15</td>
<td>1</td>
<td>632.9212</td>
<td>37</td>
</tr>
</tbody>
</table>
</div>
<p>Quando executamos esta linha de código, o <code>dplyr</code> realiza a operação de filtragem e retorna um novo <code>data.frame</code> com as informações apenas das pessoas do sexo feminino da pesquisa. Podemos também filtrar mais de uma observação ao mesmo tempo. Por exemplo, vamos supor que queremos saber todas as informações apenas das mulheres indígenas que responderam a esta pesquisa. Na variável <code>raca</code> devemos utilizar o código 5 para obter essas observações.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>mulher_indigena <span class="ot">&lt;-</span> <span class="fu">filter</span>(pnad, sexo <span class="sc">==</span> <span class="dv">2</span>, raca <span class="sc">==</span> <span class="dv">5</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mulher_indigena)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 3%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>27</td>
<td>27</td>
<td>27</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>124</td>
<td>5</td>
<td>5</td>
<td>2</td>
<td>462.0714</td>
<td>21</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>23</td>
<td>NA</td>
<td>23</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>5</td>
<td>11</td>
<td>2</td>
<td>212.2604</td>
<td>21</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>41</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>5</td>
<td>3</td>
<td>NA</td>
<td>599.5468</td>
<td>77</td>
</tr>
</tbody>
</table>
</div>
<p>Para a usar a filtragem melhor, o R fornece um conjunto de operadores de comparação, tais como: <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>!=</code>(diferente), <code>==</code>(igual) e <code>!</code>(não). Neste próximo exemplo queremos selecionar todas as pessoas do sexo masculino que possuem idades entre 25 e 30 anos, então usaremos os operadores <code>&gt;</code>e <code>&lt;</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>homem_idade <span class="ot">&lt;-</span> <span class="fu">filter</span>(pnad, sexo <span class="sc">==</span> <span class="dv">1</span>, idade <span class="sc">&gt;</span> <span class="dv">25</span>, idade <span class="sc">&lt;</span> <span class="dv">30</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(homem_idade)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 3%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>33</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>300</td>
<td>300</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>8</td>
<td>1</td>
<td>243.4132</td>
<td>29</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>33</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>937</td>
<td>937</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>15</td>
<td>1</td>
<td>571.0787</td>
<td>27</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>41</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>1677</td>
<td>1700</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>8</td>
<td>1</td>
<td>426.4508</td>
<td>27</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>4</td>
<td>NA</td>
<td>411.5138</td>
<td>28</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>42</td>
<td>NA</td>
<td>42</td>
<td>1</td>
<td>1500</td>
<td>1500</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>15</td>
<td>1</td>
<td>336.1146</td>
<td>28</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>35</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>1200</td>
<td>3600</td>
<td>2</td>
<td>NA</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>111.9671</td>
<td>26</td>
</tr>
</tbody>
</table>
</div>
<p>Neste próximo exemplo vamos utilizar o operador <code>!</code>(não). Vamos supor que queremos selecionar todas as informações da PNAD_2017 apenas das pessoas do sexo feminino. Existem várias maneiras de fazer isso e uma delas é utilizando o operador <code>!</code>(não):</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>nao_homens <span class="ot">&lt;-</span> <span class="fu">filter</span>(pnad, <span class="sc">!</span>(sexo <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nao_homens)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 3%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>27</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>88.6033</td>
<td>10</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>240</td>
<td>2</td>
<td>0</td>
<td>NA</td>
<td>447.0010</td>
<td>32</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>0</td>
<td>NA</td>
<td>695.0841</td>
<td>10</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>24</td>
<td>NA</td>
<td>24</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>7</td>
<td>NA</td>
<td>622.9802</td>
<td>15</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>288.5456</td>
<td>74</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>24</td>
<td>24</td>
<td>24</td>
<td>2</td>
<td>2000</td>
<td>2000</td>
<td>2</td>
<td>NA</td>
<td>2</td>
<td>15</td>
<td>1</td>
<td>632.9212</td>
<td>37</td>
</tr>
</tbody>
</table>
</div>
<p>Além dos valores lógicos um outro recurso importante do R são os valores faltantes, os <code>NA</code>s. O código <code>NA</code> representa um valor desconhecido. Então vamos supor que queremos filtrar todas as pessoas que não informaram se possuem alguma ocupação ou não, usaremos então:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>sem_informacao <span class="ot">&lt;-</span> <span class="fu">filter</span>(pnad, <span class="fu">is.na</span>(ocupacao))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sem_informacao)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 3%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>17</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>5</td>
<td>NA</td>
<td>116.1286</td>
<td>53</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>16</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>0</td>
<td>NA</td>
<td>295.7786</td>
<td>5</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>27</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>88.6033</td>
<td>10</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>240</td>
<td>2</td>
<td>0</td>
<td>NA</td>
<td>447.0010</td>
<td>32</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>0</td>
<td>NA</td>
<td>695.0841</td>
<td>10</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>24</td>
<td>NA</td>
<td>24</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>7</td>
<td>NA</td>
<td>622.9802</td>
<td>15</td>
</tr>
</tbody>
</table>
</div>
<p>Podemos também utilizar mais de uma condição (usando &amp; ou |). Se quisermos registros que atendam a todas as condições, podemos utilizar &amp; (E) ou separar as condições por vírgulas. E quando for necessário registros que atendam a pelo menos uma condição, devemos utilizar o operador | (OU). Vamos agora filtrar pessoas com idade de 22 anos OU 33 anos que participaram da pesquisa.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>idade_ou <span class="ot">&lt;-</span> <span class="fu">filter</span>(pnad, idade <span class="sc">==</span> <span class="dv">22</span> <span class="sc">|</span> idade <span class="sc">==</span> <span class="dv">33</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(idade_ou)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 3%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>25</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>425</td>
<td>4</td>
<td>0</td>
<td>NA</td>
<td>100.3146</td>
<td>33</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>35</td>
<td>35</td>
<td>35</td>
<td>2</td>
<td>1350</td>
<td>1350</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>11</td>
<td>1</td>
<td>1565.9688</td>
<td>22</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>25</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>190</td>
<td>4</td>
<td>11</td>
<td>NA</td>
<td>151.7975</td>
<td>22</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>29</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>150</td>
<td>4</td>
<td>5</td>
<td>NA</td>
<td>307.5332</td>
<td>22</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>26</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>1600</td>
<td>1600</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>8</td>
<td>1</td>
<td>268.9563</td>
<td>33</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>52</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>11</td>
<td>2</td>
<td>162.3579</td>
<td>22</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="select" class="level3">
<h3 class="anchored" data-anchor-id="select"><code>select()</code></h3>
<p>A função <code>select()</code> permite que você foque em um subconjunto útil usando operações baseadas nos nomes das variáveis. Neste primeiro exemplo utilizaremos a função <code>select()</code> para selecionar as colunas do banco de dados pelo nome. Não queremos todas as variáveis, queremos apenas as colunas anos_estudo e idade.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>estudo_idade <span class="ot">&lt;-</span> <span class="fu">select</span>(pnad, anos_estudo, idade)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(estudo_idade)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>anos_estudo</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>5</td>
<td>53</td>
</tr>
<tr class="even">
<td>2</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="odd">
<td>3</td>
<td>3</td>
<td>10</td>
</tr>
<tr class="even">
<td>4</td>
<td>0</td>
<td>32</td>
</tr>
<tr class="odd">
<td>5</td>
<td>4</td>
<td>54</td>
</tr>
<tr class="even">
<td>6</td>
<td>0</td>
<td>10</td>
</tr>
</tbody>
</table>
</div>
<p>Podemos também selecionar as variáveis pelos índices das colunas. Por exemplo, se quisermos selecionar as colunas Ano, UF e Capital, podemos selecioná-las da seguintes maneira:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>indice <span class="ot">&lt;-</span> <span class="fu">select</span>(pnad, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(indice)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>17</td>
<td>NA</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>16</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>27</td>
<td>NA</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>15</td>
<td>15</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
</tr>
</tbody>
</table>
</div>
<p>O operador <code>:</code> é muito útil para selecionar colunas consecutivas. Neste próximo exemplo selecionamos as colunas entre raca e idade, com elas incluso.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>raca_idade <span class="ot">&lt;-</span> <span class="fu">select</span>(pnad, raca<span class="sc">:</span>idade)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(raca_idade)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>4</td>
<td>5</td>
<td>NA</td>
<td>116.1286</td>
<td>53</td>
</tr>
<tr class="even">
<td>2</td>
<td>4</td>
<td>0</td>
<td>NA</td>
<td>295.7786</td>
<td>5</td>
</tr>
<tr class="odd">
<td>3</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>88.6033</td>
<td>10</td>
</tr>
<tr class="even">
<td>4</td>
<td>2</td>
<td>0</td>
<td>NA</td>
<td>447.0010</td>
<td>32</td>
</tr>
<tr class="odd">
<td>5</td>
<td>4</td>
<td>4</td>
<td>1</td>
<td>403.8757</td>
<td>54</td>
</tr>
<tr class="even">
<td>6</td>
<td>1</td>
<td>0</td>
<td>NA</td>
<td>695.0841</td>
<td>10</td>
</tr>
</tbody>
</table>
</div>
<p>Para retirar colunas da base de dados, basta acrescentar um <code>-</code> antes da seleção. Aqui selecionamos todas as colunas, exceto aquelas entre raca e idade, com elas incluso.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>raca_idade2 <span class="ot">&lt;-</span> <span class="fu">select</span>(pnad, <span class="sc">-</span>(raca<span class="sc">:</span>idade))</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(raca_idade2)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 1%">
<col style="width: 6%">
<col style="width: 3%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 29%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>17</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>16</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>27</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>240</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>15</td>
<td>15</td>
<td>15</td>
<td>1</td>
<td>1500</td>
<td>600</td>
<td>2</td>
<td>NA</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
</tr>
</tbody>
</table>
</div>
<p>Dentro da função <code>select()</code> podemos usar algumas funções auxiliares tais como:</p>
<ul>
<li><code>starts_with("abc")</code>: seleciona variáveis que comecem com “abc”.</li>
<li><code>ends_with("def")</code>: seleciona variáveis que terminam em “def”.</li>
<li><code>contains("jkl")</code>: seleciona variáveis que contém “jkl”.</li>
<li><code>num_range("x", 1:3)</code>: Seleciona variáveis que contém x1, x2 e x3.</li>
</ul>
<p>Utilizando uma das funções auxiliares vamos selecionar a seguir todas as colunas que começam com o texto “rendimento”.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>starts <span class="ot">&lt;-</span> <span class="fu">select</span>(pnad, <span class="fu">starts_with</span>(<span class="st">"rendimento"</span>))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(starts)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>NA</td>
<td>NA</td>
</tr>
<tr class="even">
<td>2</td>
<td>NA</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>3</td>
<td>NA</td>
<td>NA</td>
</tr>
<tr class="even">
<td>4</td>
<td>NA</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>5</td>
<td>1500</td>
<td>600</td>
</tr>
<tr class="even">
<td>6</td>
<td>NA</td>
<td>NA</td>
</tr>
</tbody>
</table>
</div>
<p>Uma outra função auxiliar interessante dentro da função <code>select()</code> é o <code>everything()</code>, que tem como propósito mover variáveis para o começo do <code>data.frame</code>. Esta função é bem útil quando estamos usando uma base com muitas variáveis e queremos deixar algumas mais visíveis.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>everything <span class="ot">&lt;-</span> <span class="fu">select</span>(pnad, idade, raca, ocupacao, <span class="fu">everything</span>())</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(everything)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 0%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 18%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>idade</th>
<th>raca</th>
<th>ocupacao</th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>anos_estudo</th>
<th>peso_domicilio</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>53</td>
<td>4</td>
<td>NA</td>
<td>2017</td>
<td>17</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>5</td>
<td>116.1286</td>
</tr>
<tr class="even">
<td>2</td>
<td>5</td>
<td>4</td>
<td>NA</td>
<td>2017</td>
<td>16</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>0</td>
<td>295.7786</td>
</tr>
<tr class="odd">
<td>3</td>
<td>10</td>
<td>1</td>
<td>NA</td>
<td>2017</td>
<td>27</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>3</td>
<td>88.6033</td>
</tr>
<tr class="even">
<td>4</td>
<td>32</td>
<td>2</td>
<td>NA</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>240</td>
<td>0</td>
<td>447.0010</td>
</tr>
<tr class="odd">
<td>5</td>
<td>54</td>
<td>4</td>
<td>1</td>
<td>2017</td>
<td>15</td>
<td>15</td>
<td>15</td>
<td>1</td>
<td>1500</td>
<td>600</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>403.8757</td>
</tr>
<tr class="even">
<td>6</td>
<td>10</td>
<td>1</td>
<td>NA</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>0</td>
<td>695.0841</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="arrange" class="level3">
<h3 class="anchored" data-anchor-id="arrange"><code>arrange()</code></h3>
<p>A função <code>arrange()</code> funciona de maneira similar a <code>filter()</code>, porém em vez de selecionar linhas ela muda a ordem delas. O primeiro argumento é a base de dados. Os demais argumentos são as colunas pelas quais queremos ordenar as linhas. Ela recebe um <code>data.frame</code> e um conjunto de nomes de coluna pelos quais ordenar. Queremos ordenar nossos dados, em ordem crescente, pelo nome do fator idade.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>ordena_idade <span class="ot">&lt;-</span> <span class="fu">arrange</span>(pnad, idade)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ordena_idade)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 3%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>13</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>NA</td>
<td>NA</td>
<td>77.20481</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>288.41435</td>
<td>0</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>31</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>239.92194</td>
<td>0</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>31</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>NA</td>
<td>NA</td>
<td>662.46602</td>
<td>0</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>26</td>
<td>26</td>
<td>26</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>514.14054</td>
<td>0</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>11</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>NA</td>
<td>NA</td>
<td>255.85428</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
<p>Se formos fornecer mais de um nome de coluna, cada coluna adicional será usada para desapate nos valores das colunas anteriores.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>idade_estudo <span class="ot">&lt;-</span> <span class="fu">arrange</span>(pnad, idade, anos_estudo)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(idade_estudo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 3%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>13</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>NA</td>
<td>NA</td>
<td>77.20481</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>288.41435</td>
<td>0</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>31</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>239.92194</td>
<td>0</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>31</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>NA</td>
<td>NA</td>
<td>662.46602</td>
<td>0</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>26</td>
<td>26</td>
<td>26</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>514.14054</td>
<td>0</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>11</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>NA</td>
<td>NA</td>
<td>255.85428</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
<p>Para que a ordenação seja feita de maneira decrescente basta utilizarmos o símbolo <code>-</code> ou então a função <code>desc()</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>idade_desc <span class="ot">&lt;-</span> <span class="fu">arrange</span>(pnad, <span class="fu">desc</span>(idade))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(idade_desc)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 3%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>29</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>0</td>
<td>NA</td>
<td>848.7943</td>
<td>86</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>35</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>4</td>
<td>NA</td>
<td>1204.5252</td>
<td>86</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>35</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>4</td>
<td>NA</td>
<td>386.5129</td>
<td>85</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>31</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>4</td>
<td>NA</td>
<td>648.5864</td>
<td>84</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>29</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>0</td>
<td>NA</td>
<td>1773.1250</td>
<td>84</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>43</td>
<td>43</td>
<td>43</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>446.7535</td>
<td>82</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="mutate" class="level3">
<h3 class="anchored" data-anchor-id="mutate"><code>mutate()</code></h3>
<p>A função <code>mutate()</code> além de selecionar conjuntos de colunas existentes, é muito eficaz ao adicionar novas colunas que sejam funções de colunas existentes. <code>mutate()</code> sempre adiciona novas colunas no final de seu conjunto de dados. Por exemplo, em nossos dados temos o valor rendimento_habitual, mas estamos interessados em apenas 10% deste valor. Podemos conseguir esse valor multiplicando rendimento_habitual por 10 e dividindo por 100.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>rendimento_hab <span class="ot">&lt;-</span> <span class="fu">mutate</span>(pnad, <span class="at">rendimento =</span> rendimento_habitual <span class="sc">*</span> <span class="dv">10</span> <span class="sc">/</span> <span class="dv">100</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rendimento_hab)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 0%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 18%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 4%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
<th>rendimento</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>17</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>5</td>
<td>NA</td>
<td>116.1286</td>
<td>53</td>
<td>NA</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>16</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>0</td>
<td>NA</td>
<td>295.7786</td>
<td>5</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>27</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>88.6033</td>
<td>10</td>
<td>NA</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>240</td>
<td>2</td>
<td>0</td>
<td>NA</td>
<td>447.0010</td>
<td>32</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>15</td>
<td>15</td>
<td>15</td>
<td>1</td>
<td>1500</td>
<td>600</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>4</td>
<td>1</td>
<td>403.8757</td>
<td>54</td>
<td>150</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>0</td>
<td>NA</td>
<td>695.0841</td>
<td>10</td>
<td>NA</td>
</tr>
</tbody>
</table>
</div>
<p>Também poderíamos ter substituido esta nova variável por uma já existente. Repare que desta vez não será adicionada nenhuma coluna no final da base de dados, a coluna rendimento_habitual terá apenas seus valores substituidos.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>rendimento <span class="ot">&lt;-</span> <span class="fu">mutate</span>(pnad, <span class="at">rendimento_habitual =</span> rendimento_habitual <span class="sc">*</span> <span class="dv">10</span> <span class="sc">/</span> <span class="dv">100</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rendimento)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 1%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 20%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>17</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>5</td>
<td>NA</td>
<td>116.1286</td>
<td>53</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>16</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>0</td>
<td>NA</td>
<td>295.7786</td>
<td>5</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>27</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>88.6033</td>
<td>10</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>21</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>240</td>
<td>2</td>
<td>0</td>
<td>NA</td>
<td>447.0010</td>
<td>32</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>15</td>
<td>15</td>
<td>15</td>
<td>1</td>
<td>1500</td>
<td>600</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>4</td>
<td>1</td>
<td>403.8757</td>
<td>54</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>43</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>0</td>
<td>NA</td>
<td>695.0841</td>
<td>10</td>
</tr>
</tbody>
</table>
</div>
<p>Podemos fazer qualquer operação com uma ou mais colunas. A única regra é que o resultado da operação retorne um vetor com comprimento igual ao número de linhas dos dados. Podemos criar e modificar quantas colunas quisermos dentro de um mesmo mutate.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>dados_es <span class="ot">&lt;-</span> <span class="fu">filter</span>(pnad, UF <span class="sc">==</span> <span class="dv">32</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>dados_es <span class="ot">&lt;-</span> <span class="fu">mutate</span>(dados_es,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">uf_sigla =</span> <span class="st">"ES"</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">ano =</span> <span class="dv">2017</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dados_es)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<colgroup>
<col style="width: 0%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 17%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Ano</th>
<th>UF</th>
<th>Capital</th>
<th>RM_RIDE</th>
<th>sexo</th>
<th>rendimento_habitual</th>
<th>rendimento_efetivo</th>
<th>bolsa_familia</th>
<th>valor_efetivamente_recebido</th>
<th>raca</th>
<th>anos_estudo</th>
<th>ocupacao</th>
<th>peso_domicilio</th>
<th>idade</th>
<th>uf_sigla</th>
<th>ano</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2017</td>
<td>32</td>
<td>NA</td>
<td>NA</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>4</td>
<td>NA</td>
<td>164.9826</td>
<td>13</td>
<td>ES</td>
<td>2017</td>
</tr>
<tr class="even">
<td>2</td>
<td>2017</td>
<td>32</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>100</td>
<td>100</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>11</td>
<td>1</td>
<td>273.1574</td>
<td>31</td>
<td>ES</td>
<td>2017</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2017</td>
<td>32</td>
<td>NA</td>
<td>32</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>1</td>
<td>3</td>
<td>NA</td>
<td>238.8926</td>
<td>10</td>
<td>ES</td>
<td>2017</td>
</tr>
<tr class="even">
<td>4</td>
<td>2017</td>
<td>32</td>
<td>NA</td>
<td>32</td>
<td>1</td>
<td>NA</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>2</td>
<td>NA</td>
<td>NA</td>
<td>272.8574</td>
<td>1</td>
<td>ES</td>
<td>2017</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2017</td>
<td>32</td>
<td>NA</td>
<td>32</td>
<td>2</td>
<td>1200</td>
<td>1200</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>11</td>
<td>1</td>
<td>329.9868</td>
<td>25</td>
<td>ES</td>
<td>2017</td>
</tr>
<tr class="even">
<td>6</td>
<td>2017</td>
<td>32</td>
<td>NA</td>
<td>32</td>
<td>2</td>
<td>1000</td>
<td>1000</td>
<td>2</td>
<td>NA</td>
<td>4</td>
<td>11</td>
<td>1</td>
<td>437.8421</td>
<td>29</td>
<td>ES</td>
<td>2017</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="summarize" class="level3">
<h3 class="anchored" data-anchor-id="summarize"><code>summarize()</code></h3>
<p>A função <code>summarize()</code> reduz um <code>data.frame</code> a uma única linha. Para sumarizar uma coluna da base, utilizamos a função <code>summarize()</code>. O código abaixo resume a coluna anos_estudo pela sua média.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>media_estudo <span class="ot">&lt;-</span> <span class="fu">summarize</span>(pnad, <span class="at">estudo =</span> <span class="fu">mean</span>(anos_estudo, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(media_estudo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>estudo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>6.779443</td>
</tr>
</tbody>
</table>
</div>
<p>Podemos calcular diversas sumarizações diferentes em um mesmo summarize. Cada sumarização será uma coluna da nova base.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>sumarizando <span class="ot">&lt;-</span> <span class="fu">summarize</span>(pnad,</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">media_estudo =</span> <span class="fu">mean</span>(anos_estudo, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mediana_idade =</span> <span class="fu">median</span>(idade, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">variancia_rendimento_hab =</span> <span class="fu">var</span>(rendimento_habitual,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sumarizando)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>media_estudo</th>
<th>mediana_idade</th>
<th>variancia_rendimento_hab</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>6.779443</td>
<td>31</td>
<td>5721312</td>
</tr>
</tbody>
</table>
</div>
<p><code>summarize()</code> também pode ser usado acompanhado por <code>group_by()</code>. A função <code>group_by()</code> tem como finalidade agrupar vetores, ou seja, todas as variáveis que colocarmos dentro de uma função <code>group_by()</code> farão parte de um novo <code>data.frame</code> com apenas estas variáveis incluso.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>grupo <span class="ot">&lt;-</span> <span class="fu">group_by</span>(pnad, sexo, raca)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(grupo, <span class="at">idade =</span> <span class="fu">mean</span>(anos_estudo, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="a-tibble-9-x-3" class="level4">
<h4 class="anchored" data-anchor-id="a-tibble-9-x-3">A tibble: 9 x 3</h4>
</section>
<section id="groups-sexo-2" class="level4">
<h4 class="anchored" data-anchor-id="groups-sexo-2">Groups: sexo [2]</h4>
<div class="table-responsive">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>sexo</th>
<th>raca</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><int></int></td>
<td><int></int></td>
<td><dbl></dbl></td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>1</td>
<td>6.85</td>
</tr>
<tr class="odd">
<td>2</td>
<td>1</td>
<td>2</td>
<td>5.23</td>
</tr>
<tr class="even">
<td>3</td>
<td>1</td>
<td>3</td>
<td>15</td>
</tr>
<tr class="odd">
<td>4</td>
<td>1</td>
<td>4</td>
<td>6.34</td>
</tr>
<tr class="even">
<td>5</td>
<td>1</td>
<td>5</td>
<td>5</td>
</tr>
<tr class="odd">
<td>6</td>
<td>2</td>
<td>1</td>
<td>8.28</td>
</tr>
<tr class="even">
<td>7</td>
<td>2</td>
<td>2</td>
<td>6.03</td>
</tr>
<tr class="odd">
<td>8</td>
<td>2</td>
<td>4</td>
<td>6.35</td>
</tr>
<tr class="even">
<td>9</td>
<td>2</td>
<td>5</td>
<td>6.33</td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="pipe" class="level3">
<h3 class="anchored" data-anchor-id="pipe"><code>pipe</code></h3>
<p>Imagine que queiramos um <code>data.frame</code> com apenas duas colunas, a UF e a idade, no entanto queremos que a idade seja em ordem decrescente. Com todas as funções que aprendemos do <code>dplyr</code> até agora, o processo natural para conseguir este <code>data.frame</code> seria:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>uf_idade <span class="ot">&lt;-</span> <span class="fu">select</span>(pnad, UF, idade)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>desc_idade <span class="ot">&lt;-</span> <span class="fu">arrange</span>(uf_idade, <span class="fu">desc</span>(idade))</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(desc_idade)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>UF</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>29</td>
<td>86</td>
</tr>
<tr class="even">
<td>2</td>
<td>35</td>
<td>86</td>
</tr>
<tr class="odd">
<td>3</td>
<td>35</td>
<td>85</td>
</tr>
<tr class="even">
<td>4</td>
<td>31</td>
<td>84</td>
</tr>
<tr class="odd">
<td>5</td>
<td>29</td>
<td>84</td>
</tr>
<tr class="even">
<td>6</td>
<td>43</td>
<td>82</td>
</tr>
</tbody>
</table>
</div>
<p>No entanto, uma das grandes vantagens do pacote <code>dplyr</code> é justamente poder fazer uma operação “atrás da outra” sem precisar fazer novas atribuições. O <code>pipe</code> é o operador que faz o encadeamento das funções do <code>tidyverse</code>. Ele irá pegar o resultado da expressão a sua esquerda e colocar como primeiro argumento da expressão da direita. Isso facilita a leitura do código, pois não precisamos fazer várias atribuições e gerar novos <code>data.frame</code>s para chegar no resultado desejado.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>pipe <span class="ot">&lt;-</span> pnad <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(UF, idade) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(idade))</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pipe)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>UF</th>
<th>idade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>29</td>
<td>86</td>
</tr>
<tr class="even">
<td>2</td>
<td>35</td>
<td>86</td>
</tr>
<tr class="odd">
<td>3</td>
<td>35</td>
<td>85</td>
</tr>
<tr class="even">
<td>4</td>
<td>31</td>
<td>84</td>
</tr>
<tr class="odd">
<td>5</td>
<td>29</td>
<td>84</td>
</tr>
<tr class="even">
<td>6</td>
<td>43</td>
<td>82</td>
</tr>
</tbody>
</table>
</div>
<p>A solução para aplicar diversas operações de manipulação em uma base de dados é esta: aplicar o operador <code>pipe</code>. Da primeira para a segunda linha, estamos aplicando a função <code>select()</code> na base pnad. Da segunda para a terceira linha, estamos aplicando a função <code>arrange()</code> na base resultante da função <code>select()</code>. <a href="https://dplyr.tidyverse.org/articles/dplyr.html?q=pipe#the-pipe">Aqui</a> tem mais informações sobre o pipe.</p>
</section>
<section id="join" class="level3">
<h3 class="anchored" data-anchor-id="join"><code>join</code></h3>
<p>Uma funcionalidade muito útil do pacote <code>dplyr</code> é o <code>join</code>, que é basicamente é a junção de dois conjuntos de dados por meio de um ou mais campos em comum. O pacote <code>dplyr</code>possui várias funções para juntar dados e essas funções se enquadram em duas categorias: <em>mutating joins</em> e <em>filtering joins</em>.</p>
<p><code>Mutating joins</code>: Adicionam novas variáveis de uma tabela às observações correspondentes em outra tabela.</p>
<p>Existem quatro tipos de mutating joins:</p>
<ul>
<li><code>left_join(x, y)</code>: Retorna todas as linhas de x, e todas as colunas tanto de x quanto de y.</li>
<li><code>right_join(x, y)</code>: Retorna todas as linhas de y, e todas as colunas tanto de uma tabela x quanto da tabela y.</li>
<li><code>inner_join(x, y)</code>: Retorna todas as linhas de uma tabela x onde existem valores correspondentes em y e todas as colunas de x e y.</li>
<li><code>full_join(x, y)</code>: Retorna todas as linhas e todas as colunas tanto de x quanto de y. Retorna NA no caso de não haver valor correspondente.</li>
</ul>
<p><code>Filtering joins</code>: As funções do tipo <em>mutating joins</em> comparam as observações de duas tabelas de dados para determinar quais variáveis adicionar. Em contraste, as funções do tipo <em>filtering joins</em> mantêm apenas as observações da primeira tabela de dados e comparam as observações com uma segunda tabela de dados para determinar quais observações manter. Uma função do tipo <em>Filtering joins</em> apenas removerá as observações e nunca adicionará novas observações.</p>
<p>Existem dois tipos de filtering joins:</p>
<ul>
<li><code>semi_join(x, y)</code>: Mantém todas as observações em uma tabela x que têm uma correspondência em uma tabela y.</li>
<li><code>anti_join(x, y)</code>: Mantém todas as observações em uma tabela x que não têm correspondência em uma tabela y.</li>
</ul>
<p>Para mais informações sobre o <code>join</code>: clique <a href="https://rpubs.com/CristianaFreitas/311735">aqui</a> e <a href="https://dplyr.tidyverse.org/reference/join.html">aqui</a>.</p>
<p>Se você gostou deste post e quer saber mais sobre o pacote <code>dplyr</code>, vou deixar os links em que você poderá aprender um pouco mais sobre o assunto.</p>
</section>
<section id="referências" class="level3">
<h3 class="anchored" data-anchor-id="referências"><code>Referências</code></h3>
<p><a href="https://r4ds.had.co.nz/transform.html" class="uri">https://r4ds.had.co.nz/transform.html</a></p>
<p><a href="https://livro.curso-r.com/7-2-dplyr.html" class="uri">https://livro.curso-r.com/7-2-dplyr.html</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.josecarlosinfo\.com\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p><br>Copyright © 2024 | Made by <a href="https://www.josecarlosinfo.com/"> Jose C. S. Junior</a> | Built with <a href="https://quarto.org/">Quarto</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>