<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pedro de Brito Neto">
<meta name="description" content="O tidyverse, uma coleção de pacotes no R, facilita manipulação, exploração e visualização de dados. Sua filosofia de design coesa permite realizar uma variedade de tarefas analíticas de forma integrada. Descubra como aproveitá-lo para análise de dados no R.">

<title>Mergulhando no tidyverse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<link href="../..//img/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(banner.png);
background-size: cover;
      }
</style>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/daslab-logo-removebg.png" alt="" class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Alternar de navegação" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../sobre/index.html" rel="" target="">
 <span class="menu-text">Sobre</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projetos/index.html" rel="" target="">
 <span class="menu-text">Projetos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutoriais/index.html" rel="" target="">
 <span class="menu-text">Tutoriais</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../ensinar/index.html" rel="" target="">
 <span class="menu-text">ensinaR</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../oobr/index.html" rel="" target="">
 <span class="menu-text">OOBr</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../eventos/index.html" rel="" target="">
 <span class="menu-text">Eventos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contato/index.html" rel="" target="">
 <span class="menu-text">Contato</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Mergulhando no tidyverse</h1>
                  <div>
        <div class="description">
          O tidyverse, uma coleção de pacotes no R, facilita manipulação, exploração e visualização de dados. Sua filosofia de design coesa permite realizar uma variedade de tarefas analíticas de forma integrada. Descubra como aproveitá-lo para análise de dados no R.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Data Wrangling</div>
                <div class="quarto-category">R</div>
                <div class="quarto-category">ggplot</div>
                <div class="quarto-category">Análise de Dados</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Autor</div>
      <div class="quarto-title-meta-contents">
               <p>Pedro de Brito Neto </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Data de Publicação</div>
      <div class="quarto-title-meta-contents">
        <p class="date">25 de abril de 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<style>
body {
    background: white;
}

.quarto-title-banner{
    text-align: left !important;
}
</style>
<p>Na maioria dos trabalhos e análises que vamos fazer aqui no R, sempre precisamos de pacotes que nos auxiliem, seja um que facilite o tratamento de dados ou um que apenas deixa a estétíca de um gráfico um pouquinho mais legal. De qualquer forma, sempre precisamos carregar pacotes para o nosso projeto. Nesse post vamos falar um pouco sobre um dos pacotes mais utilizados no R, o <code>tidyverse</code>. O <code>tidyverse</code> é uma coleção de outros pacotes que são utilizados para manipulação, exploração e visualização de dados e que compartilham uma filosofia de design bem parecida, por isso de forma combinada permitem que você consiga fazer inúmeros trabalhos. Os pacotes que fazem parte desse universo são: <code>dplyr</code>, <code>tidyr</code>, <code>ggplot2</code>, <code>forcats</code>, <code>purrr</code>, <code>stringr</code>, <code>tibble</code> e <code>readr</code>. Para descrever melhor como funciona o <code>tidyverse</code>, vamos falar sobre cada pacote presente nele de uma forma bem resumida, mostrando suas principais funções e exemplos de como utilizar. Mais para frente criaremos também posts para falar desses pacotes de uma forma mais aprofundada.</p>
<p>Para mostrar a utilização do <code>tidyverse</code> iremos realizar um tratamento na base de dados do censo demográfico brasileiro, em que o último foi realizado em 2010. Iremos também usar uma base de dados que contém informações da população estimada em cada município do Brasil em 2020. Com a utilização de algumas funções do pacote será possível juntar os dois bancos de dados e realizar uma comparação da população.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregando o tidiverse</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="readr" class="level1">
<h1><em>readr</em></h1>
<p>O <code>readr</code> é um pacote que serve para ler e importar bancos de dados para o R, os dados podem ser de diversos tipo, como, csv, tsv e xlsx. O <code>readr</code> combina duas partes para fazerem as funções, onde uma irá analisar o arquivo de maneira geral e outra a especificação da coluna. A especificação da coluna descreve como cada coluna deve ser convertida de um vetor de caracteres para o tipo de dados mais apropriado e, na maioria dos casos, não é necessário porque <code>readr</code> irá fazê-lo automaticamente. Já fizemos um post sobre importação de dados no <code>R</code> onde mostramos diferentes maneiras de importar dados, inclusive usando o <code>readr</code>. Você pode acessar o post clicando <a href="https://daslab-ufes.github.io/importando-dados/">aqui</a>.</p>
<ul>
<li><code>read_csv()</code>: arquivos separados por vírgula (CSV)</li>
<li><code>read_tsv()</code>: arquivos separados por tabulação</li>
<li><code>read_delim()</code>: arquivos gerais delimitados</li>
<li><code>read_fwf()</code>: arquivos de largura fixa</li>
<li><code>read_table()</code>: arquivos tabulares onde as colunas são separadas por
<ul>
<li><ul>
<li>espaço em branco.</li>
</ul></li>
</ul></li>
<li><code>read_log()</code>: arquivos de log da web</li>
</ul>
<p>Para as análises, estou importando os dados com a função <code>read_excel</code> do pacote <code>readxl</code>. Para reprodução do post, os arquivos podem ser obtidos <a href="../../assets/images/post_tidyverse/censo.xlsx">aqui</a> e <a href="../../assets/images/post_tidyverse/estimado.xlsx">aqui</a>.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>censo <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"censo.xlsx"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>estimado <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"estimado.xlsx"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Após a importação dos dados, iremos começar o tratamento, para isso iremos usar os pacotes <code>dplyr</code>, <code>forcats</code> e algumas funções já existentes no pacote básico do R. Então, vamos primeiro explicar de forma rápida o que cada um desses pacotes pode fazer.</p>
</section>
<section id="dplyr" class="level1">
<h1><em>dplyr</em></h1>
<p>Primeiramento vamos falar sobre o pacote <code>dplyr</code>. O pacote tem uma descrição bem direta para mostrar pra que ele serve: “<code>dplyr</code> é uma gramática de manipulação de dados, fornecendo um conjunto consistente de verbos que ajudam a resolver os desafios mais comuns de manipulação de dados”. Para maiores informações acesse <a href="https://rpubs.com/CristianaFreitas/311735">este link</a> Vamos então mostrar algumas de suas funções.</p>
<ul>
<li><code>mutate()</code>: adiciona novas variáveis que são funções de variáveis existentes.</li>
<li><code>group_by()</code>: agrupa pela(s) variável(is) no argumento. Função muito útil quando usada a funçaõ summurise.</li>
<li><code>summarise()</code>: reduz vários valores a um único resumo.</li>
<li><code>select()</code>: escolhe variáveis com base em seus nomes.</li>
<li><code>filter()</code>: escolhe casos com base em seus valores.</li>
<li><code>arrange()</code>: altera a ordem das linhas.</li>
</ul>
<p>Essas funções são bastante utilizadas em diversos tipos de análises e cada uma com uma finalidade, podemos misturar essas funções entre si e até mesmo com funções de outros pacotes para gerar o resultado desejado.</p>
<p>O <code>dplyr</code> também carrega uma função extremamente utilizada no R, o pipe (<code>%&gt;%</code>). Ele é usado para expressar claramente uma sequência de múltiplas operações. Mas porque devo usar o pipe? Bom, veja algumas vantagens:</p>
<ul>
<li><p>Você estruturará a sequência de suas operações de dados da esquerda para a direita, em oposição à sequência de dentro para fora;</p></li>
<li><p>Você evitará chamadas de função aninhadas;</p></li>
<li><p>Você minimizará a necessidade de variáveis locais e definições de funções;</p></li>
<li><p>Você tornará mais fácil adicionar etapas em qualquer lugar na sequência de operações.</p></li>
</ul>
<p>Voltando para as análises. Primeramente vamos arrumar a base de dados do censo, usaremos a função <code>clean_names</code> do pacote <code>janitor</code> (não pertencente ao tidyverse) para limpar e padronizar os nomes das variáveis, depois aplicaremos um filtro para pegar apenas os dados de 2010. Iremos renomear a varíavel <code>uf</code> para <code>uf_code</code> para facilitar um pouco nosso entendimento. Note que já estamos usando algumas das funções mencionadas.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>censo <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(censo)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>censo <span class="ot">&lt;-</span> censo <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="dv">2010</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">uf =</span> <span class="fu">as.character</span>(uf)) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"uf_codigo"</span> <span class="ot">=</span> uf)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="forcats" class="level1">
<h1><em>forcats</em></h1>
<p>O forcats é um pacote com diversas funções com o objetivo de resolver problemas com fatores (variáveis categóricas). Por exemplo, esse pacote pode ser usado para alteração da ordem dos níveis (categorias) ou dos valores dos fatores. Vamos ver algumas de suas principais funções:</p>
<ul>
<li><code>fct_reorder()</code>: reordenando um fator por outra variável.</li>
<li><code>fct_infreq()</code>: reordenando um fator pela frequência dos valores.</li>
<li><code>fct_relevel()</code>: alterar a ordem de um fator manualmente.</li>
<li><code>fct_lump()</code>: colapso dos valores menos / mais frequentes de um fator em “outro”.</li>
<li><code>fct_recode()</code>: permite que você recodifique ou altere o valor de cada nível.</li>
</ul>
<p>Agora iremos criar uma nova variável com a função <code>mutate</code> que irá receber os nomes dos municípios, porém todos em letras minúsculas com o auxilio da função <code>tolower</code>. Em seguida, criaremos mais uma variável que vai pegar os códigos dos municípios presentes na vaiável <code>uf_code</code> e recodificá-los utilizando a função <code>fct_recode</code> do <code>forcats</code> para o estado a qual se refere. Os códigos dos municípios foram obtidos no site do IBGE.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>censo <span class="ot">&lt;-</span> censo <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">municipio_1 =</span> <span class="fu">tolower</span>(municipio))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>censo <span class="ot">&lt;-</span> censo <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">uf =</span> <span class="fu">fct_recode</span>(uf_codigo,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RO"</span> <span class="ot">=</span> <span class="st">"11"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"AC"</span> <span class="ot">=</span> <span class="st">"12"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"AM"</span> <span class="ot">=</span> <span class="st">"13"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RR"</span> <span class="ot">=</span> <span class="st">"14"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PA"</span> <span class="ot">=</span> <span class="st">"15"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"AP"</span> <span class="ot">=</span> <span class="st">"16"</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"TO"</span> <span class="ot">=</span> <span class="st">"17"</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"MA"</span> <span class="ot">=</span> <span class="st">"21"</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PI"</span> <span class="ot">=</span> <span class="st">"22"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"CE"</span> <span class="ot">=</span> <span class="st">"23"</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RN"</span> <span class="ot">=</span> <span class="st">"24"</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PB"</span> <span class="ot">=</span> <span class="st">"25"</span>,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PE"</span> <span class="ot">=</span> <span class="st">"26"</span>,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"AL"</span> <span class="ot">=</span> <span class="st">"27"</span>,</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">"SE"</span> <span class="ot">=</span> <span class="st">"28"</span>,</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">"BA"</span> <span class="ot">=</span> <span class="st">"29"</span>,</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">"MG"</span> <span class="ot">=</span> <span class="st">"31"</span>,</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">"ES"</span> <span class="ot">=</span> <span class="st">"32"</span>,</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RJ"</span> <span class="ot">=</span> <span class="st">"33"</span>,</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"SP"</span> <span class="ot">=</span> <span class="st">"35"</span>,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PR"</span> <span class="ot">=</span> <span class="st">"41"</span>,</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"SC"</span> <span class="ot">=</span> <span class="st">"42"</span>,</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RS"</span> <span class="ot">=</span> <span class="st">"43"</span>,</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">"MS"</span> <span class="ot">=</span> <span class="st">"50"</span>,</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">"MT"</span> <span class="ot">=</span> <span class="st">"51"</span>,</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">"GO"</span> <span class="ot">=</span> <span class="st">"52"</span>,</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">"DF"</span> <span class="ot">=</span> <span class="st">"53"</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>censo <span class="ot">&lt;-</span> censo <span class="sc">%&gt;%</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(ano, uf, municipio_1, municipio, <span class="fu">everything</span>()) <span class="co"># essa função apenas reordena as variáveis.</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Vamos agora tratar os dados da segunda base de dados, que contém os dados da população estimada. Aqui fizemos tudo de uma maneira mais direta utilizando o <code>pipe</code>. Agora iremos utilizar algumas funções do pacote <code>stringr</code> então, vamos falar um pouco sobre ele.</p>
</section>
<section id="stringr" class="level1">
<h1><em>stringr</em></h1>
<p>O pacote <code>stringr</code> possui diversas funções para nos ajudar no tratamento de strings. Mas afinal, o que é uma string? Em resumo, uma string é umas sequência de caracteres que geralmente são utilizadas para representar palavras, frases ou textos de um programa. Strings estão presentes da maioria dos bancos de dados e é importante ter pelo menos noção de como “organizar” essas strings. Seguem algumas funções:</p>
<ul>
<li><code>str_detect()</code>: informa se há alguma correspondência com o padrão.</li>
<li><code>str_count()</code>: conta o número de padrões.</li>
<li><code>str_subset()</code>: extrai os componentes correspondentes.</li>
<li><code>str_locate()</code>: dá a posição da partida.</li>
<li><code>str_extract()</code>: extrai o texto da partida.</li>
<li><code>str_replace()</code>: substitui as correspondências por um novo texto.</li>
<li><code>str_split()</code>: divide uma string em vários pedaços.</li>
</ul>
<p>Para aprofundar melhor no uso dessas funções, iremos deixar o <a href="https://github.com/rstudio/cheatsheets/blob/master/strings.pdf">link</a> do <em>cheat sheet</em> (folha de dicas) do <code>stringr</code>.</p>
<p>Agora que já entendemos um pouco o funcionamento do <code>stringr</code>, podemos usar suas funções para auxiliar nossa análise. A variável <code>municipio</code> desse banco de dados vem no formato “nome do município (uf)” logo, é necessário utilizar uma função que “entra” em cada observação dessa variável e pegue apenas o “UF” (estado). Depois disso criaremos outra variável que irá remover o “UF” e fique apenas o nome do município. Utilizamos a função <code>str_match</code> e <code>str_sub</code>, respectivamente.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>estimado <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(estimado)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>estimado <span class="ot">&lt;-</span> estimado <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">uf =</span> <span class="fu">str_match</span>(municipio, <span class="st">"[(]([^)]+)[)]"</span>)[, <span class="dv">2</span>]) <span class="sc">%&gt;%</span> <span class="co"># essa função irá pegar as palavras dentro de parêntes, ex: "(MG)"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">muni =</span> <span class="fu">str_sub</span>(municipio, <span class="at">end =</span> <span class="sc">-</span><span class="dv">6</span>)) <span class="sc">%&gt;%</span> <span class="co"># aqui estamos removendo os últimos dígitos (UF´s) e ficando apenas com o nome do município</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">municipio_1 =</span> <span class="fu">tolower</span>(muni)) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(uf, municipio_1, populacao_estimada, <span class="fu">everything</span>())</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Agora que tratamos as variáveis desejadas das duas tabelas, é interessante juntá-las em apenas uma base de dados. Vamos fazer isso usando uma função presente no pacote <code>dplyr</code>.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">left_join</span>(estimado, censo, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"municipio_1"</span>, <span class="st">"uf"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Algumas observações devem ser feitas. Os bancos de dados possuem quantidades diferentes de observações.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(censo) <span class="co"># quantidade de observações do banco de dados do censo</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>5565</td>
</tr>
</tbody>
</table>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(estimado) <span class="co"># # quantidade de observações do banco de dados estimado</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[1]</td>
<td>5571</td>
</tr>
</tbody>
</table>
</div>
<p>Como o motivo dessa diferença na quantidade de observações não está muito claro, optamos em útilizar o <code>left_join</code> que irá retonar todas as linhas do primeiro banco de dados escolhido, neste caso, pegamos o com o maior número de observações, e irá atribuir valores vazios para células não correspondentes dentre os dois bancos de dados.</p>
</section>
<section id="tidyr" class="level1">
<h1><em>tidyr</em></h1>
<p>O pacote tidyr foi criado para ajudá-lo a criar dados organizados. Mas o que se caracteriza como dados organizados? Bom, podemos listar algumas considerações como:</p>
<ul>
<li>cada coluna é uma variável.</li>
<li>Cada linha é uma observação.</li>
<li>Cada célula é um único valor.</li>
</ul>
<p>Organizar seus dados dessa maneira facilita o trabalho porque você tem uma maneira consistente de se referir a variáveis (como nomes de coluna) e observações (como índices de linha). Ao usar dados organizados e ferramentas organizadas, você perde menos tempo se preocupando em como alimentar a saída de uma função na entrada de outra e mais tempo respondendo às suas perguntas sobre os dados. O <code>tidyr</code> descreve o formato dos dados como <em>long</em> (longo), ou seja, com mais linhas e <em>wide</em> (amplo), com mais colunas. O pacote possui qutro principais funções para organizar os seus dados: <code>gather()</code>, <code>separate()</code>, <code>spread()</code> e <code>unite()</code>.</p>
<ul>
<li><code>gather()</code>: torna os dados “amplos” mais longos.</li>
<li><code>spread()</code>: torna os dados “longos” mais amplos.</li>
<li><code>separate()</code>: divide uma única coluna em várias colunas.</li>
<li><code>unite()</code>: combina várias colunas em uma única coluna.</li>
</ul>
<p>Você pode aprender mais sobre essas funções <a href="https://uc-r.github.io/tidyr">neste link</a>. O <code>tidyr</code> também possui diversas outras funções que você pode olhar acessando o <a href="https://github.com/rstudio/cheatsheets/blob/master/data-import.pdf">cheatsheets</a>. Nesta análise iremos utilizar a função <code>drop_na</code> (retirar linhas contendo valores ausentes) do pacote para remover as variáveis com valores vazios e selecionar apenas as que iremos utilizar.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(dados)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(uf, municipio_1, populacao_estimada, pop)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Agora que retiramos os valores vazios que a princípio seriam apenas os municípios não existentes no banco de dados do censo, notamos que a tabela criada possui um número de linhas um pouco menor que a tabela original. Isso se deve ao fato de que alguns municípios foram escritos de formas diferentes em cada tabela, talvez acentuações diferentes ou algum erro de digitação. Como o foco desse post não é fazer uma análise aprofundada dos dados, vamos relevar essa diferença e continuar a análise.</p>
<p>A maneira mais interessantes de podermos comparar essa diferença entre a população em 2010 e a população estimada em 2020 é por meio de gráficos, o pacote <code>ggplot2</code>que faz parte do universo <code>tidyverse</code> é um dos mais utilizados quando o assunto é fazer gráficos. Então, vamos apresentá-lo.</p>
</section>
<section id="ggplot2" class="level1">
<h1><em>ggplot2</em></h1>
<p>O ggplot é um pacote extremamente utilizado no R que tem como finalidade criar gráficos de diversos tipos. Basicamente você fornece o conjunto de dados, diz qual tipo de gráficos utilizar e mostra como mapear as variáveis para a estética do gráfico. O <code>ggplot2</code> trabalha com “camadas” onde, após você atribuir algo ao gráfico, você utiliza o <code>+</code> e acrescenta uma nova camada. Para explicar isso de uma forma mais clara, vamos a um exemplo. Começaremos com <code>ggplot()</code> e nele vamos inserir o conjunto de dados, depois a camada fornecendo o tipo de gráfico com os atributos estéticos, por exemplo, <code>geom_bar(aes())</code>. Com esses comandos já é possível exibir um gráfico, mas podemos colocar inúmeras camadas.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># um exemplo extramente simples que mostra a quantidade de municípios em cada estado.</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> uf))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<center>
<img src="unnamed-chunk-9-1.png" class="img-fluid"><!-- -->
</center>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># podemos aprimorar esse mesmo gráfico</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> uf)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"purple"</span>) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Quantidade de municípios por Estado"</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Estado"</span>,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Quantidade"</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<center>
<img src="unnamed-chunk-9-2.png" class="img-fluid"><!-- -->
</center>
<p>Note que coloquei as informações estéticas com a função <code>aes</code> em lugares diferentes aqui nesse exemplo e o resultado seria exatamente o mesmo, porém isso nem sempre é verdade. Em um post somente sobre <code>ggplot2</code> iremos discutir isso com mais detalhes.</p>
<p>Vamos então aos gráficos de comparação. Para isso, precisaremos plotar duas variavéis no eixo x, população e população estimada, então precisaremos fazer uma breve manipulação nos dados. Neste caso, vamos usar a função <code>melt</code> do pacote <code>reshape2</code> que irá basicamente juntar em apenas uma variável: a população e a população estimada.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>dados_1 <span class="ot">&lt;-</span> <span class="fu">melt</span>(dados)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados_1, <span class="fu">aes</span>(uf, value, <span class="at">fill =</span> variable)) <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"população total em 2010 e população estimada em 2020"</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Estado"</span>,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Quantidade"</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Legenda"</span>)) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<center>
<img src="unnamed-chunk-11-1.png" class="img-fluid"><!-- -->
</center>
<p>Ao olharmos brevemente para o gráfico, percebemos que a população estimada é maior em todos os Estados, ou seja, estima-se que a população de todos os Estados cresceu ao longos desses 10 anos. Destaque para o Estado de São Paulo que aparentemente é o que mais cresceu.</p>
<p>Para fechar o universo <code>tidyverse</code>, vamos falar por último (mas não menos importante) do <code>tibble</code> e do <code>purrr</code>.</p>
</section>
<section id="tibble" class="level1">
<h1><em>tibble</em></h1>
<p>Um <code>tibble</code> se descreve como uma repaginação moderna dos dados. Basicamente um tibble é um tipo de <code>data.frame</code> com caracteríscas diferentes, pois não mudam os nomes ou tipos de variáveis e não fazem correspondência parcial. Isso força você a enfrentar os problemas mais cedos. Vamos então a um exemplo de uso.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>notas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"André"</span> <span class="ot">=</span> <span class="dv">6</span>, <span class="st">"Larissa"</span> <span class="ot">=</span> <span class="dv">9</span>, <span class="st">"Mariana"</span> <span class="ot">=</span> <span class="dv">8</span>, <span class="st">"Tobias"</span> <span class="ot">=</span> <span class="dv">3</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>notas <span class="ot">&lt;-</span> notas <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"aluno"</span>, <span class="at">value =</span> <span class="st">"nota"</span>) <span class="co"># enframe converte vetores nomeados ou listas em quadros de dados de uma ou duas colunas</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>notas</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="a-tibble-4-x-2" class="level4">
<h4 class="anchored" data-anchor-id="a-tibble-4-x-2">A tibble: 4 x 2</h4>
<div class="table-responsive">
<table class="table">
<thead>
<tr class="header">
<th></th>
<th>aluno</th>
<th>nota</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><chr></chr></td>
<td><dbl></dbl></td>
</tr>
<tr class="even">
<td>1</td>
<td>André</td>
<td>6</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Larissa</td>
<td>9</td>
</tr>
<tr class="even">
<td>3</td>
<td>Mariana</td>
<td>8</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Tobias</td>
<td>3</td>
</tr>
</tbody>
</table>
</div>
<p>Quando rodamos <code>notas</code> no console, podemos ver que aparece uma mensagem do tipo “# A tibble: 4 x 2”, ou seja, um <code>tibble</code> com comprimento 4 por 2. Quando importamos banco de dados utilizando o pacote <code>readr</code>, na maioria das vezes ele já vem no formato de um <code>tibble</code>, inclusive os dados dados que usamos para esse post.</p>
</section>
</section>
<section id="purrr" class="level1">
<h1><em>purrr</em></h1>
<p>O pacote <code>purr</code> veio para aprimorar as ferramentas de programação funcional. Ele nos fornece um conjunto de ferramentas para trabalharmos com vetores e funções. Você pode conferir o cheat sheet <a href="https://github.com/rstudio/cheatsheets/blob/master/purrr.pdf">clicando aqui</a>. Umas das funções mais importantes do pacote é a <code>map</code>. <code>map</code> é uma abstração de laços, permitindo que façamos iterações nos elementos de uma lista e não em alguma variável auxiliar. Em outras palavras ele aplica uma função em todo elemento de uma lista. Suponha que a gente queira calcular a diferença média entre população estimada e a população real. Uma ideia legal para evitar possíveis <code>if´s</code> e <code>for´s</code> seria a utilização do map. Vamos criar um vetor com os Estados de nosso interesse e uma função que ira calcular essa diferença. Então, a função <code>map</code> vai simplismente aplicar a função de interesse (definida no argumento) em cada elemento do nosso vetor.</p>
<div class="cell">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>lista_estados <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ES"</span>, <span class="st">"SP"</span>, <span class="st">"RJ"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> <span class="cf">function</span>(a) {</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    dadosf <span class="ot">&lt;-</span> <span class="fu">filter</span>(dados, uf <span class="sc">==</span> a)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(dadosf<span class="sc">$</span>populacao_estimada <span class="sc">-</span> dadosf<span class="sc">$</span>pop)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(lista_estados, dfm)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="table-responsive">
<table class="table">
<tbody>
<tr class="odd">
<td>[[1]]</td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>7396.545</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td>[[2]]</td>
<td></td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>8287.934</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>[[3]]</td>
<td></td>
</tr>
<tr class="even">
<td>[1]</td>
<td>15981.25</td>
</tr>
</tbody>
</table>
</div>
<p>Este post foi feito para mostrar um pouco de cada pacote do <code>tidyverse</code> e a aplicação de algumas funções em um tratamento simples de dois bancos de dados. Após entender o objetivo de cada pacote, fica mais fácil saber onde procurar determinadas funções que poderão te auxiliar em determinada etapa de sua análise. Vale lembrar que iremos fazer um post mais aprofundado sobre esses pacotes, então fiquem ligados.</p>
</section>
<section id="referências" class="level1">
<h1>Referências</h1>
<ul>
<li><a href="https://www.tidyverse.org/" class="uri">https://www.tidyverse.org/</a></li>
<li><a href="https://daslab-ufes.github.io/importando-dados/" class="uri">https://daslab-ufes.github.io/importando-dados/</a></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center"><br>Copyright © 2024 | Made by <a href="https://www.josecarlosinfo.com/"> Jose C. S. Junior</a> | Built with <a href="https://quarto.org/">Quarto</a></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>